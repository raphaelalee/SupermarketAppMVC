<%- include("partials/header") %>

<div class="container inventory-container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Inventory Management</h2>
    <button class="add-product-btn" data-bs-toggle="modal" data-bs-target="#addProductModal">
      + Add Product
    </button>
  </div>

  <div class="inventory-grid">
    <% products.forEach(product => { %>
      <div class="inventory-card">
        <img src="/images/<%= product.image %>" alt="<%= product.productName %>">
        <div class="info">
          <h5><%= product.productName %></h5>
          <p class="price">$<%= product.price.toFixed(2) %></p>
          <p class="category"><%= product.category %></p>

          <div class="actions">
            <button class="btn-pill btn-sm" data-bs-toggle="modal" data-bs-target="#editModal-<%= product.id %>">Edit</button>
            <button class="btn-pill-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal-<%= product.id %>">Delete</button>
          </div>
        </div>
      </div>

      <!-- Edit Modal -->
      <div class="modal fade" id="editModal-<%= product.id %>" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content p-4">
            <h4 class="fw-bold mb-3">Edit Product</h4>
            <form action="/inventory/edit/<%= product.id %>" method="POST">
              <label>Product Name</label>
              <input type="text" class="form-control mb-3" name="productName" value="<%= product.productName %>" required>

              <label>Price</label>
              <input type="number" class="form-control mb-3" step="0.01" name="price" value="<%= product.price %>" required>

              <label>Category</label>
              <input type="text" class="form-control mb-3" name="category" value="<%= product.category %>" required>

              <label>Image File Name</label>
              <input type="text" class="form-control mb-3" name="image" value="<%= product.image %>" required>

              <button class="btn-pill w-100 mt-2">Save Changes</button>
            </form>
          </div>
        </div>
      </div>

      <!-- Delete Modal -->
      <div class="modal fade" id="deleteModal-<%= product.id %>" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content p-4 text-center">
            <h4 class="fw-bold mb-3">Delete Product</h4>
            <p>Are you sure you want to delete <strong><%= product.productName %></strong>?</p>
            <form action="/inventory/delete/<%= product.id %>" method="POST">
              <button class="btn-pill-danger w-100 mt-3">Delete</button>
            </form>
          </div>
        </div>
      </div>

    <% }) %>
  </div>
</div>

<!-- Add Product Modal -->
<div class="modal fade" id="addProductModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-4">
      <h4 class="fw-bold mb-3">Add New Product</h4>
      <form action="/inventory/add" method="POST">
        <label>Product Name</label>
        <input type="text" class="form-control mb-3" name="productName" required>

        <label>Price</label>
        <input type="number" class="form-control mb-3" step="0.01" name="price" required>

        <label>Category</label>
        <input type="text" class="form-control mb-3" name="category" required>

        <label>Image File Name</label>
        <input type="text" class="form-control mb-3" name="image" required>

        <button class="btn-pill w-100 mt-3">Add Product</button>
      </form>
    </div>
  </div>
</div>

<%- include("partials/cartDrawer") %>
<%- include("partials/footer") %>
