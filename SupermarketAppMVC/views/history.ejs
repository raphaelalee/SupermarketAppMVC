<%- include('partials/header') %>

<section class="container py-5">
  <h2 class="fw-bold mb-4">History</h2>

  <% if (orders && orders.length) { %>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>Order #</th>
            <th>Date</th>
            <th class="text-end">Total</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach(o => { %>
            <tr>
              <td><%= o.orderNumber %></td>
              <td><%= new Date(o.createdAt).toLocaleString('en-SG', { hour12:false }) %></td>
              <td class="text-end">S$ <%= Number(o.total || 0).toFixed(2) %></td>
              <td><%= o.status %></td>
              <td class="text-end"><a href="/history/<%= o.id %>" class="btn btn-sm btn-outline-success">View</a></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>
    <p class="text-muted">You have no orders yet. Start shopping to place your first order.</p>
  <% } %>
</section>

<%- include('partials/footer') %>
