!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ali/wpk-reporter")):"function"==typeof define&&define.amd?define(["exports","@ali/wpk-reporter"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iLogger={},e.wpkReporter)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}var h,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(e.includes("?")){var r=f(e.split("?"),2)[1];n=void 0===r?"":r}if(n.includes("#")){var i=f(n.split("#"),1)[0];n=void 0===i?"":i}for(var o=n.split("&"),a={};o.length;){var c=f(o.shift().split("="),2),s=c[0],l=void 0===s?"":s,u=c[1],d=void 0===u?"":u;l&&(a[l]=t?decodeURIComponent(d):d)}return a},_=!1;function y(){var e=window.navigator.userAgent;return/Android/.test(e)?"android":/(iPhone|iPod)/.test(e)?"ios":/Windows\sPhone/.test(e)?"windows_phone":"unknown"}function b(e){return e.split(".").map((function(e){return parseInt(e,10)}))}function T(e){var t=function(){if(void 0!==h)return h;var e=navigator.userAgent.match(/AliApp\(LA\/(\d+.\d+.\d+)\)/);return h=e&&e.length>1?e[1]:""}();return!!function(e){return/^\d+(\.\d+)+$/.test(e)}(t)&&function(e,t){for(var n=b(e),r=b(t),i=0;i<Math.max(n.length,r.length);i++){if(n[i]>r[i])return 1;if(n[i]<r[i])return-1}return 0}(t,e)>=0}function S(e){return window.__PAGE_NAME?"".concat(window.__PAGE_NAME,"-").concat(e):e}function E(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||window.location.search.slice(1)).split("&").reduce((function(e,t){var n=f(t.split("="),2),r=n[0],i=n[1];return e[r]=i,e}),{})}function O(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}(e.split("\r\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.indexOf("x-eagleeye-id")>-1){var i=r.split(":");return i[1]?i[1]:""}}}catch(e){n.e(e)}finally{n.f()}return""}function k(){return(navigator.userAgent||"").toLowerCase().indexOf("android")>-1}function x(){var e="",t=document.head.querySelector('meta[name="itrace-bid"]')||document.head.querySelector('meta[name="wpk-pid"]')||document.head.querySelector('meta[name="wpk-bid"]');return t&&t.getAttribute("content")&&(e=t.getAttribute("content")),e}function P(e){return!!e.includes("lazada")||(!!e.includes("daraz")||(!!e.includes("mirivia")||(!!e.includes("pages.shop.")||!!e.includes("www.shop."))))}var I="OTHER";function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>2?arguments[2]:void 0;!function(e){for(var t in e)void 0===e[t]&&delete e[t]}(e=Object.assign(Object.assign({},r),e));var o=e.group;Array.isArray(o)&&(e.group=o.join("|")),0!==i.indexOf("/")&&(i="/".concat(i));var a=Object.keys(e).map((function(t){return"".concat(t,"=").concat("string"==typeof e[t]?e[t]:JSON.stringify(e[t]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(i,n||I,a,"POST"===t?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[i,n||I,a,"POST"===t?"POST":"GET"]})}var C="/lazada-marketing.ug.benefit",j=["promotion_id","promotion_status","plan_id"],A=["tag_id","tag_union_id","promotion_source","promotion_allow_cnt","promotion_amount","discount_type","percent_amount","collect_id","offer_benefit_id","min_spend","cap_value","scene_id","app"],R=["is_auto_collect"],M=["exp_type"],D=function(){return c((function e(t){o(this,e),this.baseParams={};var n=this.basic_info_check(t);if(n.is_check)n.warnMessage&&console.warn(n.warnMessage),this.setbaseInfo(t);else if(n.errorMessage)throw new Error(n.errorMessage)}),[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"benefit_info_check",value:function(e){var t=j.filter((function(t){return void 0===e[t]||""===e[t]})),n=A.filter((function(t){return void 0===e[t]||""===e[t]})),r=!0;return n&&n.length&&(console.warn("benefit info check failed, no ".concat(n.join(","),".")),r=!0),t&&t.length&&(console.error("benefit info check failed, no ".concat(t.join(","),".")),r=!1),r}},{key:"basic_info_check",value:function(e){var t=M,n=[],r=[];return R.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||n.push.apply(n,p(t)):void 0!==e[t]&&""!==e[t]||n.push(t)})),t.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||r.push.apply(r,p(t)):void 0!==e[t]&&""!==e[t]||r.push(t)})),n&&n.length?{is_check:!1,errorMessage:n.length>0?"benefit info check failed, no ".concat(n.join(","),"."):null}:r&&r.length?{is_check:!0,warnMessage:r.length>0?"benefit info check failed, no ".concat(r.join(","),"."):null}:{is_check:!0}}},{key:"init_log",value:function(){L({event_name:"init"},"POST",C,I,this.getbaseInfo())}},{key:"req_exp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"req_exp"}),"POST",C,I,this.getbaseInfo())}},{key:"req_exp_callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"req_exp_callback"}),"POST",C,I,this.getbaseInfo())}},{key:"poplayer_open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"poplayer_open"}),"POST",C,I,this.getbaseInfo())}},{key:"manual_exp",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"exp"}),"POST",C,I,this.getbaseInfo())}},{key:"toggle_max",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"toggle_max"}),"POST",C,I,this.getbaseInfo())}},{key:"toggle_min",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"toggle_min"}),"POST",C,I,this.getbaseInfo())}},{key:"collect_click",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"collect_click"}),"POST",C,I,this.getbaseInfo())}},{key:"collect_callback",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"collect_callback"}),"POST",C,I,this.getbaseInfo())}}])}(),N=function(){return c((function e(t){var n=this;o(this,e),this.getSpm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(n.getSpmAB().spmA,".").concat(n.getSpmAB().spmB,".").concat(e||n.spmC||0,".").concat(t||n.spmD||0)},this.getSpmLink=function(e,t,r){if(!e)return e;var i="spm=".concat(n.getSpm(t||n.spmC,r||n.spmD)),o=f(e.split("#"),2),a=o[0],c=o[1],s=f(a.split("?"),2)[1],l=((void 0===s?"":s).match(/(.*?)=(.*?)(&|$)/g)||[]).map((function(e){return"&"===e[e.length-1]?e.substring(0,e.length-1):e})).reduce((function(e,t){var n=t.match(/(.*)=(.*)/);return e[n[1]]=n[2],e}),{});if(l.spm)return e;var u=a;return a.indexOf("?")>-1?Object.keys(l).length>0?u+="&".concat(i):u+="".concat(i):u+="?".concat(i),c&&(u+="#".concat(c)),u},t.benefitOptions&&(this.benefit=new D(Object.assign(Object.assign({},t.benefitOptions),{module:t.module}))),this.baseParams={},this.initSpm(t.spm),this.setbaseInfo(t)}),[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"initSpm",value:function(e){var t,n,r,i,o,a;if(e){var c=e.split(".");switch(c.length){case 1:this.spmC=c[0];break;case 2:this.spmC=c[0],this.spmD=c[1];break;case 3:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2];break;case 4:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2],this.spmC=c[3]}}this.spmA=this.spmA||(null===(t=null===window||void 0===window?void 0:window.$pegasus)||void 0===t?void 0:t.spma)||(null===(r=null===(n=null===window||void 0===window?void 0:window.g_config)||void 0===n?void 0:n.pageInfo)||void 0===r?void 0:r.spma),this.spmB=this.spmB||(null===(i=null===window||void 0===window?void 0:window.$pegasus)||void 0===i?void 0:i.spmb)||(null===(a=null===(o=null===window||void 0===window?void 0:window.g_config)||void 0===o?void 0:o.pageInfo)||void 0===a?void 0:a.spmb)}},{key:"getSpmAB",value:function(){return{spmA:this.spmA,spmB:this.spmB}}},{key:"moduleExp",value:function(e){if(!(null==e?void 0:e.spm_c))throw new Error("module exp error, no spmC ");L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(e.spm_c||this.spmC)}),"POST","/lzd.aplus-module-manual.exp","EXP",this.getbaseInfo())}},{key:"expo",value:function(e){var t,n,r,i=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");i.length>1?(n=i[0]||this.spmC,r=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,r=i[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(r),event_name:e.event_name||"expose"}),"POST","/lzd.aplus-manual.exp","EXP",this.getbaseInfo())}},{key:"click",value:function(e){var t,n,r,i=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");i.length>1?(n=i[0]||this.spmC,r=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,r=i[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(r,"}"),event_name:e.event_name||"click"}),"POST","/lzd.aplus-manual.clk","CLK",this.getbaseInfo())}},{key:"other",value:function(e){var t;if(!(null==e?void 0:e.event_name))throw new Error("error, no event_name");var n,r,i=(null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split("."))||[];i.length>1?(n=i[0]||this.spmC,r=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,r=i[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(r)}),"POST","/lzd.aplus-manual.other",I,this.getbaseInfo())}}])}(),z=["group","biz","event"],q=new N({spm:"",module:"",bizname:""});function F(e){var t=e.group,n=e.biz,r=e.event,i=d(e,z);q.other({spm_cd:"",module:"",group:t||"h5-itrace-sdk",bizname:n||"",event_name:r||"",user_data:u({},i)})}var B=0,H=0;function W(e,t,n,r){var i=function(e,t){return t||(B=B||performance.timeOrigin,e?e-B:+new Date-B-0)}(e,t),o=+new Date;H=performance.now()||0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(window.WindVane||{}).isAvailable)return!1;var r=location,i=r.origin+r.pathname;i=window.__SSR_STATUS__?r.search?i+r.search+"&pageType=SourcePageSSR"+r.hash:i+"?pageType=SourcePageSSR"+r.hash:location.href,window.WindVane&&window.WindVane.call("LACustomWVPlugin","reportPerformanceInfo",{webViewType:n,url:i,containerType:"object"===g(window.__pha_environment__)?1:0,firstScreenPaint:e,firstScreenPaintTimeStamp:t},(function(){console.log("[component_did_mount_hook] report time to App",e)}),(function(e){console.log("err",e)}))}(i,o),function(e,t,n,r){window.__wpk&&window.__wpk.report&&(window.__wpk.report(Object.assign({category:203,msg:S("componentDidMount"),wl_avgv1:e,c1:e,c2:B,c3:t||"-",c4:0,c5:H,c6:window.__SSR_STATUS__?"SourcePageSSR":""},r)),console.log("[component_did_mount_hook] report time to iTrace",e))}(i,o,0,r)}window.__WindVane=window.WindVane||{};var U=function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle),window.lzdiTraceLifeCircle.lzdiTraceShareDidMountTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.rocket_pre_hot)return null;"function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";0!==e.indexOf("/")&&(e="/".concat(e));var i=Object.keys(n).map((function(e){return"".concat(e,"=").concat("string"==typeof n[e]?n[e]:JSON.stringify(n[e]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(e,t,i,"POST"===r?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,i,"POST"===r?"POST":"GET"]})}("/lzdfe.pageModule.exp","EXP"),W(e,t,0,n),window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingEnd()},window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingStart()},G=function(e){if("unknown"!==y()&&("ios"!==y()||T("7.2.0"))&&("android"!==y()||T("7.3.0"))&&window.WindVane)try{window.WindVane.call("LAWVNexpInfo","reportNexpInfo",e,(function(){console.log("reportNexpInfo:",e)}),(function(e){console.warn("reportNexpInfo failed:",e)}))}catch(e){console.error("report badcase error:",e)}},K=function(e){return Math.random()<e},J=function(e){return"string"==typeof e?parseInt(e):e},V={},X=[],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(T("7.4.0"))if("function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),window.WindVane){(e=[].concat(e)).forEach((function(e){if(e.event&&e.time&&(V[e.event]=e.time,"first_screen_rendering_end"===e.event&&e.costTime>3e3||"fsp_end"===e.event&&e.costTime>5e3)){var t=E();G({module:"h5_perf",subModule:window.location.href,info:u(u({},e),{},{query:t,timeline:V})})}}));try{window.WindVane.call("LACustomWVPlugin","reportLifecycle",{lifecycles:e},(function(){console.log("reportLifecycle:",e)}),(function(e){console.warn("reportLifecycle failed:",e)}))}catch(e){console.error("report lifecyle error:",e)}}else X.push(e)},$=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?null:{},r=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,o=0;o<r.length;o++){var a=r[o].split("="),c=a.slice(1).join("=");t.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var s=a[0].replace(i,decodeURIComponent);if(c=c.replace(i,decodeURIComponent),t.json)try{c=JSON.parse(c)}catch(e){}if(e===s){n=c;break}e||(n[s]=c)}catch(e){}}return n},Q=navigator.userAgent;v();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ee={exports:{}};!function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==g(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_",WID_KEY2:"__itrace_wid"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},,,function(e,t,n){var r=n(0).env,i=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},o=function(e,t){if(t=t||{},e.env===r.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin已开启");var o,a,c=function(){e.reportFlow()};e.toolKit.isPageReady(e.prerender)?setTimeout(c,0):e.toolKit.onPageReady(c,!0,e.prerender),e.spa&&(n(4)(),o=function(t){i(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},a=function(t){i(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",o),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),c=o=a=null}))}else e.logger.info("wpkflowPlugin已关闭")};o.prototype.pluginId="flow",e.exports=o},function(e,t){var n=window.history||{},r=window.document,i=function(e,t){var n;window.CustomEvent?n=new CustomEvent(e,{detail:t}):((n=r.createEvent("HTMLEvents")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)},o=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=n[e];"function"==typeof t&&(n[e]=function(e,r,a){var c=location.href,s=t.call(n,e,r,a);if(!a||"string"!=typeof a)return s;if(a===c)return s;try{var l=c.split("#"),u=a.split("#"),d=o(l[0]),f=o(u[0]),p=l[1]&&l[1].replace(/^\/?(.*)/,"$1"),m=u[1]&&u[1].replace(/^\/?(.*)/,"$1");d!==f?i("historystatechange",f):p!==m&&i("historystatechange",m)}catch(e){}return s},n[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replaceState")}}])}(ee);var te=Z(ee.exports),ne={exports:{}};!function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==g(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({0:function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_",WID_KEY2:"__itrace_wid"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},6:function(e,t,n){var r=n(0),i=r.sdk,o=r.http.methods,a=r.category,c=function(e){return e>=200&&e<=299},s=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.wpk.quark.cn")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")&&-1===e.indexOf("//log.m.sm.cn/0.gif")},l=function(e,t){if(e.hasOwnProperty(t))return e[t]},u=function(e,t,n){e.toolKit.isObject(n)&&e.toolKit.extend(t,{c1:l(n,"c1"),c2:l(n,"c2"),c3:l(n,"c3"),c4:l(n,"c4"),c5:l(n,"c5"),bl1:l(n,"bl1"),bl2:l(n,"bl2"),bl3:l(n,"bl3"),bl4:l(n,"bl4"),bl5:l(n,"bl5")}),e.report(t)},d=location.origin,f=function(e){return!e||0===e.indexOf(d)||!/^(\/\/|http:|https:).*/.test(e)};function p(e,t){var n=null;try{var r,i,o,a=e.toolKit.trim(t||"").split(/[\r\n]+/);a.length>0&&(n={},e.toolKit.forEach(a,(function(e){r=e.split(": "),i=r.shift(),o=r.join(": "),n[i]=o})))}catch(e){}return n}function m(e){try{if(!e)return{};var t={};return e.forEach((function(e,n){t[n]=e})),t}catch(e){return{}}}var g=function(e,t){if(e.env===r.env.BROWSER&&window){var n={enable:!0,sampleRate:1,enableTrace:!1,enableCorsTrace:function(e){return!1},requestHeaders:{"x-wpk-reqid":function(){return e.toolKit.uuid(!1)},"x-wpk-bid":function(){return e.bid}},responseHeaders:["x-eagleeye-id","x-wpk-serverid"]},l=e.toolKit.extend(n,t);l.enable?(e.logger.info("wpkinterfacePlugin已开启"),"XMLHttpRequest"in window&&function(e,t){var n=window.XMLHttpRequest.prototype,r=n.open;n.open=function(n,i){this.__reqCtx__={method:n,url:i||"",start:Date.now()};var o=[].slice.call(arguments);r.apply(this,o);var a=this;t.enableTrace&&(f(i)||t.enableCorsTrace(i))&&e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){var n=t.requestHeaders[e]();a.setRequestHeader(e,n)}))};var l=n.setRequestHeader;n.setRequestHeader=function(e,t){var n=[].slice.call(arguments);l.apply(this,n),this.__reqCtx__&&(this.__reqCtx__.headers||(this.__reqCtx__.headers={}),this.__reqCtx__.headers[e]=t)};var d=n.send;n.send=function(n){var r=this;function l(){if(r.__reqCtx__&&4===r.readyState)try{var l=Date.now(),d=(r.responseURL||r.__reqCtx__.url).split("?"),f=d[0],m=d[1]||"",g="",w=r.__reqCtx__.headers||{};r.__reqCtx__.method.toUpperCase()!==o.GET&&n&&(g=JSON.stringify(n));var h=p(e,r.getAllResponseHeaders()),v=String(r.response),_=!0,y={};"function"==typeof t.errorFilter&&(_=!!(y=t.errorFilter.call(this,{url:f,status:r.status,response:v,body:g,queryString:m,reqHeaders:w,resHeaders:h})),e.logger.warn("api errorFilter执行结果：",y)),v.length>2048&&(v="[response content too large]");var b=l-r.__reqCtx__.start;if(_&&b<121e3&&s(f)){var T=y.bizCode||r.status,S=y.reqHeaders||w,E=y.resHeaders||h,O={category:a.API,sampleRate:t.sampleRate,w_res:f,w_param:m,w_body:c(T)||!t.withBody?"":g,w_method:r.__reqCtx__.method,w_rc:T,w_rt:b,w_resp:c(T)||!t.withResp?"":y.resp||v,w_hd:JSON.stringify(S),w_trace_reqid:S&&S["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(E),w_trace_serverid:E&&E["x-wpk-serverid"]||void 0,msg:y.msg||"",w_type:16};u(e,O,y)}}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}}if("onreadystatechange"in r&&"function"==typeof r.onreadystatechange){var f=r.onreadystatechange;r.onreadystatechange=function(){var e=[].slice.call(arguments);l.apply(this,e),f.apply(this,e)}}else r.onreadystatechange=l;var m=[].slice.call(arguments);return d.apply(this,m)}}(e,l),"fetch"in window&&function(e,t){var n=function(e){var t=(e||"").split("?");return{apiAddr:t[0],queryString:t.length>1&&t[1]||""}},r=function(n,r,i,o,s,l,u,d,f,p,m){var g=e.toolKit.isObject(d)?d:{},w=g.reqHeaders||l,h=g.resHeaders||u;return{w_res:n,w_param:r,w_method:i,w_rc:s,w_rt:o,w_hd:JSON.stringify(w),w_trace_reqid:w&&w["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(h),w_trace_serverid:h&&h["x-wpk-serverid"]||void 0,msg:g.msg||f||"",w_body:c(s)||!t.withBody?"":p,w_resp:c(s)||!t.withResp?"":g.resp||m||"",category:a.API,sampleRate:t.sampleRate,w_type:17}},l=function(n,r,i,o,a,c,s){var l={};return"function"==typeof t.errorFilter&&(l=t.errorFilter.call(this,{url:n,queryString:r,status:i,body:o,response:a,reqHeaders:c,resHeaders:s}),e.logger.warn("api errorFilter执行结果：",l)),l},d=window.fetch;window.fetch=function(){var c=[].slice.call(arguments),p=o.GET;c[1]&&c[1].method&&(p=c[1].method.toUpperCase());var g,w=c[0];g="string"==typeof w?w:w instanceof URL?w.toString():w.url||"",t.enableTrace&&(f(g)||t.enableCorsTrace(g))&&(c[1]?void 0===c[1].headers&&(c[1].headers={}):c[1]={headers:{}},e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){c[1].headers[e]=t.requestHeaders[e]()})));var h=Date.now(),v="",_=null;return c[1]&&(_=c[1].headers),p!==o.GET&&c[1]&&c[1].body&&(v=JSON.stringify(c[1].body)),d.apply(this,c).then((function(t){try{var o=Date.now(),d=n(t.url||c[0]),f=d.apiAddr,g=d.queryString,w=t.clone(),y=m(w.headers);w.text().then((function(n){n=n||"";var i=l.call(this,f,g,t.status,v,n,_,y),a=!!i;n=n.length>2048?"[response content too large]":n;var c=o-h;if(a&&c<121e3&&s(f)){var d=i.bizCode||t.status,m=r(f,g,p,c,d,_,y,i,void 0,v,n);u(e,m,i)}}))}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}return t})).catch((function(t){var i=n(c[0]),o=i.apiAddr,a=i.queryString,d=l.call(this,o,a,-1,v,"",_,{}),f=!!d,m=Date.now()-h;if(f&&m<121e3&&s(o)){var g=d.bizCode||-1,w=r(o,a,p,m,g,_,{},d,t.message,v,void 0);u(e,w,d)}throw t}))}}(e,l),(e.enableMtop||l.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(n){var r=this.params,o=this.options,l=Date.now();return n().then((function(){try{if(o.H5Request&&(o.getJSON||o.postJSON))return void e.logger.debug("识别到请求为xhr, api监控交由xhr的方式处理");var n,d=o.retJson||{},f=Date.now()-l,p=d.code||200,m=r.type,g=r.api,w=e.toolKit.objToQueryString(o.querystring),h=o.postdata&&o.postdata.data?e.toolKit.objToJsonString(o.postdata.data):null,v=e.toolKit.objToJsonString(d.data||{}),_=d.ret;_ instanceof Array&&(_=_.join(",")),-1===_.indexOf("SUCCESS")&&(n=_);var y=!0,b={};if("function"==typeof t.errorFilter&&(y=!!(b=t.errorFilter.call(this,{url:g,status:p,response:v,body:h,queryString:w,msg:n})),e.logger.warn("api errorFilter执行结果：",b)),y&&f<121e3&&s(g)){var T=b.bizCode||p,S={category:a.API,sampleRate:t.sampleRate,w_res:g,w_param:w,w_body:c(T)||!t.withBody?"":h,w_method:m,w_rc:T,w_rt:f,w_resp:c(T)||!t.withResp?"":b.resp||v,msg:b.msg||n||"",w_type:100};u(e,S,b)}}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,l))):e.logger.info("wpkinterfacePlugin已关闭")}};g.prototype.pluginId="api",e.exports=g}})}(ne);var re=Z(ne.exports),ie={exports:{}};!function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==g(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_",WID_KEY2:"__itrace_wid"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(e,t,n){var r=n(0),i=function(e,t){if(e.env===r.env.BROWSER&&"undefined"!=typeof window){var n={enable:!0,sampleRate:(t=t||{}).sampleRate||1,rootNode:t.rootNode,ignorePageUrls:t.ignorePageUrls||null,maxDepth:t.maxDepth||8,minElements:t.minElements||10,keyNoteText:t.keyNoteText||[],onloadDuration:t.onloadDuration||8e3,wsDuration:t.wsDuration||3e3,startCheckingTime:t.startCheckingTime||5e3},i=e.toolKit.extend(n,t);if(i.enable){e.logger.info("wpkblankPagePlugin已开启");try{if(e.toolKit.isFunction(i.ignorePageUrls)&&i.ignorePageUrls(location))return void e.logger.info("当前页面在白屏检测的白名单中")}catch(e){}var o=!1;if(i.onloadDuration>0&&"complete"!==document.readyState&&!e.prerender)var a=setTimeout((function(){o=!0,e.reportBlankPage({w_fp:100,w_wst:i.onloadDuration}),clearTimeout(a)}),i.onloadDuration);var c=function(){clearTimeout(a);try{!o&&i.wsDuration>0&&function(e,t){var n=performance.timing;if("function"==typeof window.PerformanceNavigationTiming)try{var r=performance.getEntriesByType("navigation")[0];r&&(n=r)}catch(e){}if(n)try{n.responseEnd-n.fetchStart>=e&&t()}catch(e){}}(i.wsDuration,(function(){e.reportBlankPage({w_fp:104,w_wst:i.wsDuration})}));var t=setTimeout((function(){!function(e,t){var n,i,o,a,c,s=0,l=0,u=!1,d=[],f=function(e){return 0===e.style.width||0===e.style.height||"none"===e.style.display||0===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility||void 0!==e.type&&"hidden"===e.type},p=function(e){return e&&-1!==["VIDEO","IMG","BUTTON","TEXTAREA","RADIO","CHECKBOX","SELECT","IFRAME","CANVAS","SVG"].indexOf(e.nodeName)},m=function(n,r){for(var i=Array.prototype.slice.call(n);i.length;){var o=i.shift();r>s&&(s=r),d.push({tag:o.tagName,layer:r,cls:o.className});var a=f(o);if(e.logger.info("depth："+r,o.nodeType,o.tagName,a),!a){if(l++,p(o)){u=!0,e.logger.info("有可见元素，非白屏");break}r<=t.maxDepth&&!f(o)&&o.children.length&&m(o.children,r+1)}}},g=!1;if(i=t.rootNode?"function"==typeof t.rootNode?t.rootNode():t.rootNode:document.body)if(o=i.innerText)a=t.keyNoteText,c=o,e.toolKit.some(a,(function(e){return e===c}))?(g=!0,n=102,e.logger.warn("肯定白屏，命中关键字",o)):(g=!1,u=!0);else{var w=Array.prototype.slice.call(i.children),h=e.toolKit.filter(w,(function(e){return-1===["STYLE","SCRIPT","LINK"].indexOf(e.nodeName)}));m(h,1)}else g=!0,n=103,e.logger.warn("白屏，木有body标签或者指定的root节点为空");e.logger.warn("元素数: ",l),e.logger.warn("遍历的最大层级: ",s),e.logger.warn("dsl",d),!g&&!u&&l<t.minElements&&(g=!0,n=101),g&&(e.logger.warn("白屏了",n),e.reportBlankPage({w_fp:n,w_dsl:JSON.stringify(d),w_depth:s,w_domcnt:l}),e.report({category:r.category.MAINDOC,sampleRate:1,bl1:JSON.stringify(document.documentElement.innerHTML),_forcePost:!0}),!e._hasCollectResTiming&&performance&&"function"==typeof performance.getEntriesByType&&(e.report({category:r.category.RESTIMING,bl1:JSON.stringify(performance.getEntriesByType("resource")),bl2:performance.timeOrigin||performance.timing.fetchStart,_forcePost:!0}),e._hasCollectResTiming=!0))}(e,i),clearTimeout(t)}),i.startCheckingTime)}catch(t){e.logger.error("bkpg checking oops: ",t)}};e.toolKit.onPageReady(c,!0,e.prerender),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),c=null}))}else e.logger.info("wpkblankPagePlugin已关闭")}};i.prototype.pluginId="bkpg",e.exports=i}])}(ie);var oe,ae,ce=Z(ie.exports),se=k(),le=function(){se||window.isTrace2||document.addEventListener("DOMContentLoaded",(function(){window.__wpk.addPlugin(ce,{rootNode:document.getElementById("container")||document.getElementById("root")})}))},ue=x(),de=(oe=document.head.querySelector('meta[name="wpk-rel"]'))&&oe.getAttribute("content")?oe.getAttribute("content"):"",fe=function(){var e=document.head.querySelector('meta[name="wpk-sampleRate"]');return e&&e.getAttribute("content")?Number(e.getAttribute("content")):""}(),pe=v(),me=!!(ae="object"===("undefined"==typeof location?"undefined":g(location))&&location.hostname||"")&&(ae.indexOf("i.lazada.")>=0||ae.indexOf("-p.lazada.")>=0||ae.indexOf("pre-wormhole.")>=0||ae.indexOf("pre.lazada.")>=0||ae.indexOf("pre-www.lazada.")>=0||ae.indexOf("pre-wallet-nav.lazada.")>=0||ae.indexOf("-staging.lazada.")>=0)&&pe.iTraceDebug,ge=location.pathname.includes("/wow/i/sg/o2o-test/");var we={bid:ue,cid:"",uid:$("lzd_uid"),utdid:$("utdid"),rel:de||"2.0.45",sampleRate:fe||1,cluster:"intl",debug:me||ge,beforeSend:function(e){var t,n;n=!1,1===(t=e).category&&K(.01)&&(n=!0),2===t.category&&200!==t.w_rc&&K(.1)&&(n=!0),4===t.category&&K(.1)&&(n=!0),200===t.category&&J(t.c1)>5e3&&(n=!0),202===t.category&&J(t.wl_avgv1)>6e3&&(n=!0),n&&G({module:"h5_itrace",subModule:t.w_bid,info:u({},t)});var r,i,o,a=(i=(v()||{}).wh_pid||"",o=(null===(r=window)||void 0===r||null===(r=r.__SCREEN_DATAS)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.modules)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.version)||"",i&&/\/paylater(-test)?\/|\/cashloan(-test)?\/|\/credit-seller(-test)?\/|\/lazpay-warchest(-test)?\/|\/lazpay-page-module(-test)?\/|\/ewallet-h5(-test)?\/|\/dg-fe/.test(i)?o:"");a&&(e.rel=a,window.__wpk.setConfig({rel:a}));var c=(window.lzdiTraceLifeCircle||{}).lzdiTraceBeforeSend;try{return e&&c&&"function"==typeof c&&(e=c(e)),e}catch(t){return console.error("iTrace sdk beforeSend Format function execute error",t),e}}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"boolean"==typeof e.isDebug&&(e.debug=e.isDebug),e.pid&&(e.bid=e.pid),Object.assign({},we,e)},ve=/AliApp/.test(Q),_e=k(),ye=!!document.querySelector("meta[name='wpk-bid']"),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(P(location.host))if(e.pid){if(window.isTrace2)return Te(e);if("function"==typeof window.wpkReporter){var t=null;if(window.__wpk)e.pid&&(e.bid=e.pid,delete e.pid),window.__wpk.setConfig(e),t=window.__wpk;else{if(ye&&ve&&_e){var n=he(u(u({},e),{},{plugins:[[te,{enable:!1}]]}));(t=new r.default(n)).install()}else{var i=he(u(u({},e),{},{plugins:[[re,{enable:!1}]]}));(t=new r.default(i)).installAll(),le()}window.__wpk=t}return console.log("lzd-h5-itrace version: v".concat("2.0.45")),t}console.warn("wpk-reporter is not ready.")}else console.warn("[lzd-h5-itrace] 实例化失败，缺少必要参数");else console.warn("[lzd-h5-itrace] 非法域名")},Te=function(){var e=he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return window.__wpk.setConfig(e),window.__wpk},Se=!1,Ee=function(e){if(!Se){var t=function(e){var t=e.name,n=e.duration,r=void 0===n?0:n,i=e.decodedBodySize,o=void 0===i?0:i,a=e.encodedBodySize,c=void 0===a?0:a,s=e.transferSize,l=void 0===s?0:s;try{var u=new URL(t);window.__wpk.report({category:202,msg:u.hostname,wl_avgv1:r.toFixed(2),wl_avgv2:o,wl_avgv3:c,wl_avgv4:l,c1:t,bl5:JSON.stringify(e),sampleRate:.01})}catch(e){}},n=function(e){var n=function(e){try{var t=new URL(e.name);return"https:"!==t.protocol&&"http:"!==t.protocol||"img"!==e.initiatorType||(n=t.hostname).includes("member.lazada.")||n.includes("my.lazada.")||n.includes("www.lazada.")||n.includes("pages.lazada.")||n.includes("c.lazada.")||n.includes("www.google.")||n.includes("translate.google.")||n.includes("criteo.net")||n.includes("doubleclick.net")||n.includes("googleadservices")||n.includes("cnzz.com")||n.includes("log.aliyuncs.com")||n.includes("mmstat.")||n.includes("clarity")||n.includes("ucweb.com")||n.includes("googleapis")||-1!==["graph.facebook.com","connect.facebook.net","csi.gstatic.com","airunit.taobao.com","acjs.aliyun.com","whos.amung.us","kcart.alipay.com","www.google-analytics.com","px-intl.ucweb.com","www.googletagmanager.com","googleads.g.doubleclick.net","www.facebook.com","gm.mmstat.com","sg.mmstat.com","bat.bing.com","cm.everesttech.net","pixel.everesttech.net","retcode-sg-lazada.arms.aliyuncs.com","fourier.taobao.com","pixel.tapad.com","secure.adnxs.com","s-cs.send.microad.jp","cs.adingo.jp"].indexOf(n)?null:e}catch(t){console.log("invalid url",e)}var n;return null}(e);n&&(window.requestIdleCallback?window.requestIdleCallback((function(){t(n)})):setTimeout((function(){t(n)}),0))};if(Se=!0,console.log("[lzd-h5-itrace 2.0] init images perf monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)window.performance.getEntriesByType("resource").forEach((function(e){n(e)})),new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n(e)}))})).observe({entryTypes:["resource"]})}};var Oe=function(){var e=-1!=location.href.indexOf("jt_debug=fsp"),t=function(){},n=e?console.log.bind(console.log,"jt_sfsp: "):t,r="ignorefspcollection",i=["mousedown","touchstart"];if("undefined"!=typeof window&&"undefined"!=typeof performance&&"undefined"!=typeof MutationObserver&&"undefined"!=typeof screen){var o={SCRIPT:1,LINK:1,HEAD:1,MATE:1,TITLE:1,STYLE:1,BR:1,SVG:2,IMG:2,CANVAS:2,VIDEO:2},a=screen,c=a.width,s=a.height,l=document.documentElement,u=l.clientWidth,d=l.clientHeight,f=Math.round(Math.max(.02*Math.min(c,s),12)),p=Math.round(.05*s),m=Math.min(d,s),g=Math.min(u,c),w=m*g,h=3e4,v=[],_=null,y=!1,b=null,T=null,S=null,E=!1,O=0,k={version:"20221212",listeners:[],lazy:function(){_||C()},on:function(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e)},un:function(e){if(e){var t=this.listeners.indexOf(e);this.listeners.splice(t,1)}},forceStop:function(){M({type:"force"})},_fn:function(e){var t;for(var n in this.listeners)(t=this.listeners[n])&&t(e);this.listeners=[]},getFrames:function(){return v},getIgnoreNodes:function(){return b},install:function(){C()},getXPATH:J},x=!1;window._ITRACE_FSP_OUTPUT?(k.listeners=window._ITRACE_FSP_OUTPUT.listeners,k.forceStop=window._ITRACE_FSP_OUTPUT.forceStop,y=!0):(window._ITRACE_FSP_OUTPUT=k,x=!0);var P=new MutationObserver((function(e){if(y)return;U(e,(function(e){var t=e.target,n=e.addedNodes,r=t.nodeName;if(1!==o[r]&&!G(b,(function(e){return e&&e.contains&&e.contains(t)}))){if(v.length>0&&"HTML"!==r&&"BODY"!==r){var i=t.getBoundingClientRect(),a=i.top,c=i.left,s=i.bottom,l=i.right;if(s<p||a>m-p||l<p||c>g-p)return}U(n,(function(e){try{if(!e.parentElement)return;var t=e;if(function(e){return 3===e.nodeType&&!/^[\r\n\s]*$/.test(e.wholeText)}(e)&&1===e.parentElement.childNodes.length&&(t=e.parentElement),1!==t.nodeType&&9!==t.nodeType)return;if(1===o[t.nodeName])return;!G(L,(function(e){return e.contains(t)}))&&L.push(t)}catch(e){}}))}})),L.length>0&&null===I&&(I=setTimeout((function(){A(L),L=[],I=null}),1e3/60))})),I=null,L=[];return e&&(k.findViewRectInFirstScreen=D,k.createScreenBox=N,k.findMeaningfulDom=F),k}function C(){if(x&&!_&&!y){b=[],S=function(){var n=null,r=null;if(!e)return t;var i=function(e){if(n){var t=Date.now();if(e){cancelAnimationFrame(r);var i=(performance.timeOrigin||performance.timing.navigationStart)+e;t=Math.round(i),n.style.color="#0ff"}n.innerHTML="".concat(t," | ").concat(Math.round(e||performance.now()))}},o=function(){y||(r=requestAnimationFrame(o),n&&(n.innerHTML="".concat(Date.now())))},a=function(){if(!r){n=document.createElement("div");var e={position:"fixed",bottom:"6px",right:"6px",color:"#fff",padding:"0 4px",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99999990,textAlign:"center",fontSize:"12px"};for(var t in e)n.style[t]=e[t];document.body.appendChild(n),requestAnimationFrame(o)}};document.body?a():window.addEventListener("DOMContentLoaded",a);return i}();var n=document.firstElementChild;if(document.body)document.querySelectorAll("BODY > *").length>0&&(U(document.querySelectorAll("[".concat(r,"]")),(function(e){b.push(e),E=!0})),A(document.querySelectorAll("BODY IMG")));S(),P.observe(n,{childList:!0,subtree:!0});var o=function(){i.forEach((function(e){return n.addEventListener(e,M,!0)}))};"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o),_=setTimeout((function(){M({type:"timeout"})}),3e4)}}function j(e,t){if(!y){S(),t=t||W();var n=e.top,r=e.left,i=e.bottom,o=e.right,a=Math.abs(i-n),c=Math.abs(o-r);e.lastTime=Math.max(t,e.lastTime),e.v=Math.floor(a*c/w*1e4)/1e4,T&&clearTimeout(T),T=setTimeout((function(){M({type:"idle"})}),3e3);var s=v.length;if(!(s<4))for(var l=0,u=0,d=0,p={},m=0;m<s;m++){var g=v[m];if(g.g=g.g||m+1,!(g.bottom-g.top<f||g.right-g.left<f)){if(l+=Math.min(g.v,1),g.v>=d&&(d=g.v,u=m),l>4){M({type:"sum_area",p:u});break}for(var h=0;h<m;h++){var _=v[h];if(!(_.bottom-_.top<f||_.right-_.left<f))if(q(g,_,f)){var b=g.g=_.g;p[b]=(p[b]||0)+1,p[b]>=3&&M({type:"tail",p:b-1});break}}}}}}function A(e){try{var t=D(e),r=t.meaningfulList,i=t.box,o=t.cost;if(!i||!i.count)return;v.push(i),O+=o,n("makeFrames cost:".concat(o,"ms; frames count: ").concat(v.length),i),i.wait=0,i.imgSeq=[],U(r,(function(e){var t=e.nodeName;if("IMG"===t){i.wait+=1;var r=e.complete?1:0,o=e.src,a=function(){if(y)e.removeEventListener("load",a,!0);else{if(r>0){if(e.src===o)return;n("img change src",o,e.src,W())}++r>2&&i.startTime>1e3||z((function(){var t=e.getBoundingClientRect(),n=t.top,r=t.left,o=t.bottom,a=t.right,c=t.width,s=t.height;c<f||s<f||o<p||n>m-p||a<p||r>g-p||(i.left=Math.min(r,i.left),i.top=Math.min(n,i.top),i.bottom=Math.max(i.bottom,n+s),i.right=Math.max(i.right,r+c),i.imgSeq.push({node:e,time:W()}),j(i))}),null)}};e.addEventListener("load",a,!0)}else"VIDEO"===t&&e.poster&&i.bgImg.push(e.poster)})),j(i)}catch(e){}}function R(e,t,r){var i=function(){var e=performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||null;if(e)return e;var t=performance.timing;return{loadEventStart:t.loadEventStart-t.navigationStart,domContentLoadedEventStart:t.domContentLoadedEventStart-t.navigationStart}}().loadEventStart;if(!0!==r&&i<=0)!function(e){var t=null,n=0,r=function(){t&&clearTimeout(t),window.removeEventListener("load",r),0===n++&&e()};t=setTimeout(r,h-W()),window.addEventListener("load",r)}((function(){return R(e,t,!0)}));else{var o={},a=-1,c=-1,s=0,l=null;U(performance.getEntries(),(function(e){var t=e.entryType,n=e.name,r=e.startTime,i=e.duration;if("paint"==t)switch(n){case"first-contentful-paint":a=r;break;case"first-paint":c=r}else/\.css$/i.test(n)?s=Math.max(r+i,s):o[K(n)]=r+i}));var u={},d=0;if(e&&e.length>0&&U(e,(function(e){e=K(e),o[e]&&(n("check img from resourceTiming: ",e,o[e]),u[e]=o[e],d=Math.max(u[e],d))})),i>0){var p=[],m=document.body&&document.body.querySelectorAll("*[style]"),g=function(e,t,r){if((t=K(t))&&!/^data:/i.test(t)){var a=o[t];if(!(a>i)){var c=N(e,r);if(c){var u=c.width,d=c.height;0==c.isCutoff&&u>f&&d>f?s<a&&(s=a,l=e):n("small size img",e)}}}};m&&m.length>0&&U(m,(function(e){var t=/url\(['"]?(.*?)['"]?\)/i.exec(e.style&&e.style.backgroundImage||"");t=t&&t[1],g(e,t,p)})),U(document.images,(function(e){return g(e,e.src,p)}))}t({ssrTime:Math.max(s,a,c),fcp:a,fp:c,ssrLastImg:l,checkResult:u,checkResultMaxValue:d})}}function M(t){if(!y){var r=t.type,o=t.p,a=0,c=W();try{var s=performance.getEntriesByName("first-contentful-paint")[0];if(s&&s.startTime&&(a=s.startTime),-1!=i.indexOf(r)&&(0===a||W()-a<200))return void n("no fcp, ignore mousedown",c)}catch(e){}_&&clearTimeout(_),T&&clearTimeout(T),y=!0,P&&(P.disconnect(),P.takeRecords(),P=null);var l=null,u=[];switch(r){case"tail":case"sum_area":l=h(v.slice(0,o));break;default:var d=h(v),p=d.length;if(p>=2){p--;var m=0;do{if(!q(d[p],d[p-1],f))break;m++}while(--p>0);m>0&&(0===p&&n("Full Screen Reflash x 2."),d=d.slice(0,p||1))}l=d}var g=0,w=null;l.length?U(l,(function(e){e.lastTime>g&&(g=e.lastTime,w=e)})):g=a,R(u,(function(t){try{var o=t.ssrTime,a=t.fcp,c=t.fp,s=t.ssrLastImg,u=t.checkResult,d=t.checkResultMaxValue;d>g&&(g=d);var f=(performance.timeOrigin||performance.timing.navigationStart)+g;n("stopHandleBy ".concat(r,", sfsp: ").concat(g,", checkImg: ").concat(d,", ssrTime: ").concat(o,", fcp: ").concat(a,", fp: ").concat(c,", ssrLastImg: "),s,l,u);var p=w||{},m=p.domSize,h=p.imgSeq,_="";try{h&&h.length>0&&(_=J(h[h.length-1].node))}catch(e){}var y={endType:-1!=i.indexOf(r)?i[0]:r,timestamp:f,cost:g,domSize:m,validFrames:l,ssrTime:o,ssrLastImg:s,bgImgRecord:u,bgImgMaxTime:d,fcp:a,fp:c,haveIgnoreAttr:E,lastImg:_,execCost:O,version:k.version};if(window.dispatchEvent&&window.CustomEvent){var T=new CustomEvent("jstracker.fsp",{detail:y});window.dispatchEvent(T)}window.__itrace_fsp_detail__=y;try{k._fn(y)}catch(e){}S(g),e||(v.length=0,b&&(b.length=0,b=null))}catch(e){}}),"force"===r)}function h(e){var t=[];if(e.length<=1){var n=((t=e.slice(0))[0]||{}).bgImg;n&&U(n,(function(e){return u.push(e)}))}else U(e,(function(e){var n=e.v,r=e.bgImg;n<.02||(r&&U(r,(function(e){return u.push(e)})),t.push(e))}));return t}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=W(),r={startTime:n,lastTime:n,left:Number.MAX_SAFE_INTEGER,top:Number.MAX_SAFE_INTEGER,right:0,bottom:0,count:0,searchNodes:0,bgImg:[],domSize:document.all?document.all.length:document.getElementsByTagName("*").length},i=r.meaningfulList=[],a=function(e){r.searchNodes++;var n=N(e,t);return n?(function(e,t){if(e){var n=e.top,o=e.left,a=e.width,c=e.height,s=e.backgroundImage;r.left=Math.min(o,r.left),r.top=Math.min(n,r.top),r.bottom=Math.max(r.bottom,n+c),r.right=Math.max(r.right,o+a),i.push(t),r.count++,s&&r.bgImg.push(s)}}(n,e),!0):n};return U(e,(function(e){(o[e.nodeName]||3)<2||0!==a(e)&&U(F(e,[]),a)})),{meaningfulList:i,cacheObj:t,box:r,cost:W()-n}}function N(e,t){var n=null;if(t||(t=[]),n=B(t,e)){if(n.result)return n.result}else{if(n=H(e),t.push(n),n.ignore)return b.push(e),n.result=0;if(G(b,(function(t){return t&&t.contains&&t.contains(e)})))return n.result=0}var r=n,i=r.backgroundImage,o=void 0===i?null:i,a=r.pBox,l=a.top,u=a.left,d=a.bottom,w=a.right,h=a.width,v=a.height,_=!1,y=!0;if("IMG"!==e.nodeName||!0===e.complete||0!==h&&0!==v){if(h<f||v<f)return n.result=!1;if(d<p||l>s-p||w<p||u>c-p)return n.result=0}else y=!1;for(var T=e.parentElement,S=null,E=document.scrollingElement||document.documentElement;T;){if((S=B(t,T))||((S=H(T)).ignore&&b.push(T),t.push(S)),S.ignore)return n.result=0;var O=S,k=O.scrollTop,x=O.scrollLeft,P=O.scrollHeight,I=O.scrollWidth,L=O.clientHeight,C=O.clientWidth,j=O.overflowX,A=O.overflowY;if(P>L&&(T===E||"visible"!==A)||I>C&&(T===E||"visible"!==j)){l+=k,d+=k,u+=x,w+=x;var R=S.box?S.box:T.getBoundingClientRect();if(S.box=S.box||R,l-R.bottom>4||u-R.right>4||R.top-d>4||R.left-w>4)return n.result=!1}T=T.parentElement,S=null}return _=_||l>=m||u>=g,n.result=(!y||!(d<p||l>m-p||w<p||u>g-p))&&{top:l,left:u,width:h,height:v,isCutoff:_,backgroundImage:o}}function z(e,t){t&&t.then&&t.catch?t.then((function(){z(e)})).catch((function(){z(e)})):window.requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,0)}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2)),i=Math.sqrt(Math.pow(e.bottom-t.bottom,2)+Math.pow(e.right-t.right,2));return r<2*n&&i<2*n}function F(e,t){t=t||[];var n=e.firstChild;if(n)do{switch(n.nodeType){case 1:if(1===(o[n.nodeName]||0))break;if("IMG"===n.nodeName||"VIDEO"===n.nodeName){t.push(n);break}if(0===n.childElementCount){t.push(n);break}F(n,t);break;case 3:/^[\r\n\s]*$/.test(n.wholeText)||t.push(e)}}while(n=n.nextSibling);return t}function B(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.key===t)return r}return null}function H(e){var t={key:e,pBox:e.getBoundingClientRect(),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth,isNew:!0};if("BODY"!==e.tagName){if(window.getComputedStyle){var n=window.getComputedStyle(e,null);t.display=n.display,t.position=n.position,t.overflow=n.overflow,t.overflowX=n.overflowX,t.overflowY=n.overflowY,t.transform=n.transform;var i=/url\(['"]?(.*?)['"]?\)/i,o=n.backgroundImage;i.test(o)&&(o=o.replace(i,"$1"),/^data:/i.test(o)||(t.backgroundImage=o)),("fixed"===n.position||v.length>0&&("none"===n.display||"0"===n.opacity||"hidden"===n.visibility))&&(t.ignore=!0)}e.hasAttribute(r)&&(t.ignore=!0,E=!0)}return t}function W(){return performance.now()}function U(e,t){if(t&&e)for(var n=e.length||0,r=0;r<n;r++)t(e[r],r)}function G(e,t){if(t&&e){for(var n=e.length||0,r=0;r<n;r++)if(t(e[r],r))return!0;return!1}}function K(e){return e?e.replace(/^https?:\/\//i,"//"):e}function J(e){var t=[],n=function(e){return e.className?"".concat(e.tagName,'[@class="').concat(e.className,'"]'):e.tagName},r=function(e){for(var r=n(e),i=1,o=e;o=o.previousElementSibling;)n(o)===r&&i++;t.push("".concat(r,"[").concat(i,"]"))},i=e;do{r(i)}while("BODY"!==i.tagName&&(i=i.parentElement));return t.push("/"),t.reverse().join("/")}}(),ke=Oe,xe=!1,Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isSPA;if(!xe||t){xe=!0,window.__wpk||be(e);var n="",r=(window.lzdiTraceLifeCircle||{}).FSPStart,i=function(t){var r=t.timestamp,i=t.time,o=t.domSize,a=t.ssrTime,c=void 0===a?"":a,s=window.lzdiTraceLifeCircle||{},l=s.lzdiTraceShareFspTime,u=s.FSPEnd;if(console.log("[fsp-report 2.0]",r,i,o,window.preLoadTime,c),window.__lzd_fsp_done=!0,window.__wpk&&window.__wpk.report){var d=Math.floor(i)-Math.floor(window.preLoadTime||0);if(window.__lzd_fsp_value=d,d>0&&d<2e4){var f=e.msg||"自定义首屏";f=S(f);var p=window.performance.getEntriesByType("navigation")[0],m=p&&p.responseEnd;window.__wpk.report({category:e.category||200,msg:f,wl_avgv1:d,wl_avgv2:window.__SSR_FS_TIME||void 0,wl_avgv3:m,wl_avgv4:c||void 0,c1:d,c2:i,c3:window.preLoadTime||"-",c4:n,c5:window.__SSR_TRACE_ID||"-"}),"function"==typeof l&&l({fspTime:d,preLoadTime:window.preLoadTime,url:location.href}),"function"==typeof u&&u()}else{var g=d<0?"负值":"极大值 (>20s)";window.__wpk.report({category:e.category||200,msg:"".concat(g),c1:d,c2:i,c3:window.preLoadTime||"-",c4:n})}}};if("function"==typeof r&&r(),t)ke.install(),ke.listeners=ke.listeners||[],ke.listeners.push((function(e){console.log("spa fsp install onReport"),i({timestamp:e.timestamp,time:e.cost,domSize:e.domSize})}));else if(window.fspTracker){window.__isSSR&&(n="SourcePageSSR");var o=function(e){var t=e.cost,n=e.timestamp,r=e.domSize,o=e.ssrTime;i({time:t,timestamp:n,domSize:r,ssrTime:o})};window.__FSP?o(window.__FSP):window.fspTracker.listeners.push((function(e){o(e)}))}else if(!0===window.rocket_pre_hot)ke.install(),ke.listeners=ke.listeners||[],ke.listeners.push((function(e){i({timestamp:e.timestamp,time:e.cost,domSize:e.domSize})}));else if(window.lzdFspTrackerPlugin){var a=window.__itrace_fsp_detail__;a?i({timestamp:a.timestamp,time:a.cost,domSize:a.domSize}):(window.lzdFspTrackerPlugin.listeners=window.lzdFspTrackerPlugin.listeners||[],window.lzdFspTrackerPlugin.listeners.push((function(e){i({timestamp:e.timestamp,time:e.cost,domSize:e.domSize})})))}else ke.install(),ke.listeners=ke.listeners||[],ke.listeners.push((function(e){i({timestamp:e.timestamp,time:e.cost,domSize:e.domSize})}))}},Ie=["scene","status","value","args"],Le=[/c\.go\-mpulse\.net/,/ds\-aksb\-a\.akamaihd\.net\/RRT/,/s\.akamaihd\.net\/eum\/getdns\.txt/,/pre\-wormhole/],Ce=["SUCCESS","UNION_NOT_MATCH_FREQUENCY","FAIL_SYS_TOKEN_EMPTY","FAIL_SYS_ILLEGAL_ACCESS","FAIL_SYS_TOKEN_EXOIRED","FAIL_SYS_TOKEN_ILLEGAL"],je={SG:"acs-m.lazada.sg",ID:"acs-m.lazada.co.id",PH:"acs-m.lazada.com.ph",VN:"acs-m.pages.lazada.vn",TH:"acs-m.pages.lazada.co.th",MY:"acs-m.pages.lazada.com.my"};function Ae(e){if(n=e,"[object Array]"===Object.prototype.toString.call(n)){var t=e&&e.length&&e[0].split("::");return t&&t[1]?{key:t[0],displayMessage:t[1]}:-1!==e[0].indexOf("FAIL_SYS")||-1!==e[0].indexOf("SYSTEM_ERROR")||-1!==e[0].indexOf("UNKNOWN_FAIL_CODE")||-1!==e[0].indexOf("TIMEOUT")?{key:t[0],displayMessage:"Network Error"}:{key:e[0],displayMessage:"Unknown Error"}}var n;return{key:e,displayMessage:"Unknown Error"}}var Re=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Le.some((function(t){return t.test(e)}))||window.__wpk.reportApi(u({msg:i,url:e,method:t,status:r,spent:n,response:r},o),{})},Me=function(e){var t,n,r=e.params,i=e.options,o=e.spent,a=e.performanceNow,c="",s=i.retJson,l=void 0===s?{}:s,u=i.path,d=i.prefix,f=i.subDomain,p=i.pageDomain,m=l.responseHeaders,g=void 0===m?"":m,w=l.ret,h=O(g),v=Ae(w),_=v.displayMessage,y=r.type||"",b=l.v||r.v||"",T=r["x-i18n-regionID"]||"-",S=je[T.toUpperCase()]||T,E=l.api||r.api||"";E=E.toLowerCase(),t=r.ext_headers&&r.ext_headers["x-uid"]||"",n=Ce.includes(v.key)?200:0,c=u?"https:".concat(u):f&&p?"https://".concat(d?d+".":"").concat(f,".").concat(p,"/gw/").concat(E,"/").concat(b):"https://".concat(S,"/gw/").concat(E,"/").concat(b),Re(c,y,o,n,v.key,{c1:t,c2:h,c3:_,c4:a,c5:v.key,c6:window.location.origin+window.location.pathname})},De=function(e){var t;((window.__iTraceMtopQueue||[]).forEach((function(e){Me(e)})),window.__iTraceMtopQueue=[],window.iLogger&&(window.iLogger.mtopReport=Me),window.isMtopMiddlewareReady)||(window.__wpk||be(e),console.log("--- iLoggerMtopPluginInit ---"),window,(t=window.lib||(window.lib={}))&&t.mtop&&!t.mtop.ERROR?(t.mtop.middlewares.push((function(e){var t=this.params,n=this.options,r=n.querystring,i=parseInt((void 0===r?{}:r).t)||Date.now(),o=void 0;return performance&&"function"==typeof performance.now&&(o=Math.floor(performance.now())-Math.floor(window.preLoadTime||0)),e().then((function(){var e=(n.results[0]||{}).stat,r=(void 0===e?{}:e).oneWayTime||Date.now()-i;Me({params:t,options:n,spent:r,performanceNow:o})}))})),window.isMtopMiddlewareReady=!0,console.log("[lzd-h5-itrace] mtop itrace plugin init success!")):console.warn("[lzd-h5-itrace] Mtop 没有初始化，无法添加 Mtop Itrace 监控插件！请参考 Mtop 文档 http://gitlab.alibaba-inc.com/mtb/lib-mtop ",t))},Ne=De,ze=[".webp",".png",".jpg",".gif"],qe=!1,Fe=function(e){if(window.IMG_PRELOAD_PROFILE_PLUGIN&&!qe&&(qe=!0,console.log("[lzd-h5-itrace 2.0] init preload profile monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)){var t,n=window.performance.getEntriesByType("resource")||[],r=[],i=0,o=n.filter((function(e){if("link"===e.initiatorType&&ze.some((function(t){return e.name.endsWith(t)}))&&r.push(e),"link"===e.initiatorType&&e.name.endsWith(".css"))return i+=e.duration,t?e.responseEnd<t&&(t=e.responseEnd):t=e.responseEnd,!0}));if(!(o&&o.length&&r&&r.length))return;var a=[],c=[],s=0,l=0;r.forEach((function(e){e.requestStart>t?(a.push(e),s+=e.duration):(c.push(e),l+=e.duration)}));try{window.__wpk.report({category:206,msg:"Image Preload Profile",w_succ:a.length<1?1:0,wl_avgv1:c.length,wl_avgv2:a.length,wl_avgv3:i/(o.length||1),wl_avgv4:l/(c.length||1),wl_avgv5:s/(a.length||1),bl1:c.map((function(e){return e.name})).join(";"),bl2:a.map((function(e){return e.name})).join(";")})}catch(e){}}};location.href.includes("wv_report_all_changes=true");var Be=location.href.includes("wv_reset_inp=true");var He=function(e){var t,n,r,i=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},o=function(e){if("loading"===document.readyState)return"loading";var t=i();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},a=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},c=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:a(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},s=-1,l=function(){return s},u=function(e){addEventListener("pageshow",(function(t){t.persisted&&(s=t.timeStamp,e(t))}),!0)},d=function(){var e=i();return e&&e.activationStart||0},f=function(e,t){var n=i(),r="navigate";return l()>=0?r="back-forward-cache":n&&(document.prerendering||d()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},p=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},m=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},g=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},w=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},h=function(e){var t=!1;return function(){t||(e(),t=!0)}},v=-1,_=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},y=function(e){"hidden"===document.visibilityState&&v>-1&&(v="visibilitychange"===e.type?e.timeStamp:0,T())},b=function(){addEventListener("visibilitychange",y,!0),addEventListener("prerenderingchange",y,!0)},T=function(){removeEventListener("visibilitychange",y,!0),removeEventListener("prerenderingchange",y,!0)},S=function(){return v<0&&(v=_(),b(),u((function(){setTimeout((function(){v=_(),b()}),0)}))),{get firstHiddenTime(){return v}}},E=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},O=[1800,3e3],k=function(e,t){t=t||{},E((function(){var n,r=S(),i=f("FCP"),o=p("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-d(),0),i.entries.push(e),n(!0)))}))}));o&&(n=m(e,i,O,t.reportAllChanges),u((function(r){i=f("FCP"),n=m(e,i,O,t.reportAllChanges),g((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},x=[.1,.25],P=0,I=1/0,L=0,C=function(e){e.forEach((function(e){e.interactionId&&(I=Math.min(I,e.interactionId),L=Math.max(L,e.interactionId),P=L?(L-I)/7+1:0)}))},j=function(){return t?P:performance.interactionCount||0},A=function(){"interactionCount"in performance||t||(t=p("event",C,{type:"event",buffered:!0,durationThreshold:0}))},R=[],M=new Map,D=0,N=[],z=function(e){if(N.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=R[R.length-1],n=M.get(e.interactionId);if(n||R.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};M.set(r.id,r),R.push(r)}R.sort((function(e,t){return t.latency-e.latency})),R.length>10&&R.splice(10).forEach((function(e){return M.delete(e.id)}))}}},q=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=h(e),"hidden"===document.visibilityState?e():(n=t(e),w(e)),n},F=[200,500],B=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},E((function(){var n;A();var r,i=f("INP"),o=function(e){q((function(){e.forEach(z);var t=function(){var e=Math.min(R.length-1,Math.floor((j()-D)/50));return R[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r()),Be&&(D=j(),R.length=0,M.clear())}))},a=p("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=m(e,i,F,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),w((function(){o(a.takeRecords()),r(!0)})),u((function(){D=j(),R.length=0,M.clear(),i=f("INP"),r=m(e,i,F,t.reportAllChanges)})))})))},H=[],W=[],U=new WeakMap,G=new Map,K=-1,J=function(e){H=H.concat(e),V()},V=function(){K<0&&(K=q(X))},X=function(){G.size>10&&G.forEach((function(e,t){M.has(t)||G.delete(t)}));var e=R.map((function(e){return U.get(e.entries[0])})),t=W.length-50;W=W.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,i=0;i<W.length;i++){var o=W[i];ee(o.startTime,o.processingEnd).forEach((function(e){n.add(e)}))}for(var a=0;a<50;a++){var c=H[H.length-1-a];if(!c||c.startTime<r)break;n.add(c)}H=Array.from(n),K=-1};N.push((function(e){e.interactionId&&e.target&&!G.has(e.interactionId)&&G.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;r=Math.max(r,e.processingEnd);for(var i=W.length-1;i>=0;i--){var o=W[i];if(Math.abs(n-o.renderTime)<=8){(t=o).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},W.push(t)),(e.interactionId||"first-input"===e.entryType)&&U.set(e,t),V()}));var Y,$,Q,Z,ee=function(e,t){for(var n,r=[],i=0;n=H[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},te=[2500,4e3],ne={},re=[800,1800],ie=function e(t){document.prerendering?E((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},oe=function(e,t){t=t||{};var n=f("TTFB"),r=m(e,n,re,t.reportAllChanges);ie((function(){var o=i();o&&(n.value=Math.max(o.responseStart-d(),0),n.entries=[o],r(!0),u((function(){n=f("TTFB",0),(r=m(e,n,re,t.reportAllChanges))(!0)})))}))},ae={passive:!0,capture:!0},ce=new Date,se=function(e,t){Y||(Y=t,$=e,Q=new Date,de(removeEventListener),le())},le=function(){if($>=0&&$<Q-ce){var e={entryType:"first-input",name:Y.type,target:Y.target,cancelable:Y.cancelable,startTime:Y.timeStamp,processingStart:Y.timeStamp+$};Z.forEach((function(t){t(e)})),Z=[]}},ue=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){se(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ae),removeEventListener("pointercancel",r,ae)};addEventListener("pointerup",n,ae),addEventListener("pointercancel",r,ae)}(t,e):se(t,e)}},de=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ue,ae)}))},fe=[100,300];return e.CLSThresholds=x,e.FCPThresholds=O,e.FIDThresholds=fe,e.INPThresholds=F,e.LCPThresholds=te,e.TTFBThresholds=re,e.onCLS=function(e,t){!function(e,t){t=t||{},k(h((function(){var n,r=f("CLS",0),i=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,n())},c=p("layout-shift",a);c&&(n=m(e,r,x,t.reportAllChanges),w((function(){a(c.takeRecords()),n(!0)})),u((function(){i=0,r=f("CLS",0),n=m(e,r,x,t.reportAllChanges),g((function(){return n()}))})),setTimeout(n,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(r&&r.sources&&r.sources.length){var i=(t=r.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];i&&(n={largestShiftTarget:c(i.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:i,largestShiftEntry:r,loadState:o(r.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)},e.onFCP=function(e,t){k((function(t){var n=function(e){var t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:o(l())};if(e.entries.length){var n=i(),r=e.entries[e.entries.length-1];if(n){var a=n.activationStart||0,c=Math.max(0,n.responseStart-a);t={timeToFirstByte:c,firstByteToFCP:e.value-c,loadState:o(e.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)},e.onFID=function(e,t){!function(e,t){t=t||{},E((function(){var n,r=S(),i=f("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},a=function(e){e.forEach(o)},c=p("first-input",a);n=m(e,i,fe,t.reportAllChanges),c&&(w(h((function(){a(c.takeRecords()),c.disconnect()}))),u((function(){var r;i=f("FID"),n=m(e,i,fe,t.reportAllChanges),Z=[],$=-1,Y=null,de(addEventListener),r=o,Z.push(r),le()})))}))}((function(t){var n=function(e){var t=e.entries[0],n={eventTarget:c(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:o(t.startTime)};return Object.assign(e,{attribution:n})}(t);e(n)}),t)},e.onINP=function(e,t){n||(n=p("long-animation-frame",J)),B((function(t){var n=function(e){var t=e.entries[0],n=U.get(t),r=t.processingStart,i=n.processingEnd,a=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),s=ee(t.startTime,i),l=e.entries.find((function(e){return e.target})),u=l&&l.target||G.get(t.interactionId),d=[t.startTime+t.duration,i].concat(s.map((function(e){return e.startTime+e.duration}))),f=Math.max.apply(Math,d),p={interactionTarget:c(u),interactionTargetElement:u,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:f,processedEventEntries:a,longAnimationFrameEntries:s,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(f-i,0),loadState:o(t.startTime)};return Object.assign(e,{attribution:p})}(t);e(n)}),t)},e.onLCP=function(e,t){!function(e,t){t=t||{},E((function(){var n,r=S(),i=f("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){!function(e){if(location.href.includes("test_duration_data=true"))return!1;for(;e;){if(e.hasAttribute&&e.hasAttribute("ignorelcpcollection"))return!0;e=e.parentElement}return!1}(e.element)?e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-d(),0),i.entries=[e],n()):console.log("[web-vitals] LCP ignore",e&&e.element)}))},a=p("largest-contentful-paint",o);if(a){n=m(e,i,te,t.reportAllChanges);var c=h((function(){ne[i.id]||(o(a.takeRecords()),a.disconnect(),ne[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return q(c)}),!0)})),w(c),window.__LCP_STOP_LISTENING=c,u((function(r){i=f("LCP"),n=m(e,i,te,t.reportAllChanges),g((function(){i.value=performance.now()-r.timeStamp,ne[i.id]=!0,n(!0)}))}))}}))}((function(t){var n=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=i();if(n){var r=n.activationStart||0,o=e.entries[e.entries.length-1],a=o.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===o.url}))[0],s=Math.max(0,n.responseStart-r),l=Math.max(s,a?(a.requestStart||a.startTime)-r:0),u=Math.max(l,a?a.responseEnd-r:0),d=Math.max(u,o.startTime-r);t={element:c(o.element),timeToFirstByte:s,resourceLoadDelay:l-s,resourceLoadDuration:u-l,elementRenderDelay:d-u,navigationEntry:n,lcpEntry:o},o.url&&(t.url=o.url),a&&(t.lcpResourceEntry=a)}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)},e.onTTFB=function(e,t){oe((function(t){var n=function(e){var t={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(e.entries.length){var n=e.entries[0],r=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-r,0),o=Math.max(n.domainLookupStart-r,0),a=Math.max(n.connectStart-r,0),c=Math.max(n.connectEnd-r,0);t={waitingDuration:i,cacheDuration:o-i,dnsDuration:a-o,connectionDuration:c-a,requestDuration:e.value-c,navigationEntry:n}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)},e}({}),We=He.onLCP,Ue=He.onFCP,Ge=He.onFID,Ke=He.onINP,Je=He.onCLS,Ve=function(e){return/use_ssr=true/.test(window.location.href)?e-(E().uprproxy_time||0):window.__IS_TRADITION_SSR?e:window.__IS_KANGAROO_SSR?e-(window.prehotShowUpTime||0):e},Xe={};function Ye(e){if(window.__wpk&&!Xe[e.name]){Xe[e.name]=!0;try{var t=e.value;"LCP"===e.name&&(t-=window.preLoadTime||0);var n={category:1028,wl_avgv1:t,c1:window.location.pathname,c2:(window.$pegasus||{}).id,c3:e.name,c4:e.rating};if(window.__wpk.report(n),window.__wpk.listeners&&window.__wpk.listeners.length){var r=window.__wpk.listeners.filter((function(t){return e.name===t.name}));r.length>0&&r.forEach((function(t){t.callback&&t.callback(e)}))}}catch(e){console.log("reportwv error")}}}var $e=x(),Qe={},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(P(location.host)){var t,n,r={selfDefineFSP:!0,mtopPluginInit:!0,imagesPerf:!0,assetPerf:!0,didMountTimeReport:!0,preloadProfile:!0,webVitals:!0,fps:!0},i=document.head.querySelector('meta[name="lzd-itrace-close-auto-monitor"]'),o=(t="close-auto-monitor",(n=document.getElementById("itraceScript"))?n.getAttribute(t):"");if(i&&i.getAttribute("content")||o)(i&&i.getAttribute("content")||o).split(",").forEach((function(e){var t=e.trim();r[t]=!1}));!function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle);var e=window.performance.timing||{};window.lzdiTraceLifeCircle.NativePrefetchEnd=function(){Y({event:"native_prefetch_end",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||Date.now()})},window.lzdiTraceLifeCircle.FirstScreenRenderingStart=function(){Y({event:"first_screen_rendering_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FirstScreenRenderingEnd=function(){Y({event:"first_screen_rendering_end",time:Date.now(),costTime:Date.now()-(V.first_screen_rendering_start||e.responseStart)})},window.lzdiTraceLifeCircle.FSPStart=function(){Y({event:"fsp_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FSPEnd=function(){Y({event:"fsp_end",time:Date.now(),costTime:Date.now()-(V.fsp_start||e.responseStart)})},window.lzdiTraceLifeCircle.FetchSSRDataStart=function(){Y({event:"fetch_ssr_data_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.domComplete})},window.lzdiTraceLifeCircle.FetchSSRDataEnd=function(){Y({event:"fetch_ssr_data_end",time:Date.now(),costTime:Date.now()-(V.fetch_ssr_data_start||e.domComplete)})},window.lzdiTraceLifeCircle.FetchFirstScreenDataStart=function(e){e&&Y({event:"fetch_first_screen_data_start",time:e})},window.lzdiTraceLifeCircle.FetchFirstScreenDataEnd=function(e){e&&Y({event:"fetch_first_screen_data_end",time:e,costTime:e-V.fetch_first_screen_data_start})},window.lzdiTraceLifeCircle.PageRenderingEnd=function(){Y({event:"page_rendering_end",time:Date.now(),costTime:Date.now()-(V.page_rendering_start||e.responseStart)})},console.log("[lzd-h5-itrace] lifecyle report plugin ready"),document.addEventListener("DOMContentLoaded",(function(){Y(X)}))}(),r.selfDefineFSP?Pe(e):console.log("[lzd-h5-itrace] close auto run selDefineFSP"),r.imagesPerf?Ee(e):console.log("[lzd-h5-itrace] close auto run iLoggerImagesPerf"),r.assetPerf?function(){if(!_){var e=function(e){var t=e.name,n=e.responseStart,i=e.fetchStart,o=e.domainLookupEnd,a=e.domainLookupStart,c=e.requestStart,s=e.responseEnd,l=e.connectEnd,u=e.connectStart,d=e.transferSize,f=e.decodedBodySize,p=e.startTime;try{var m={category:204,msg:new URL(t).hostname,wl_avgv1:n-i,wl_avgv2:o-a,wl_avgv3:l-u,wl_avgv4:n-c,wl_avgv5:s-n,wl_avgv6:s-i,wl_avgv7:d,wl_avgv8:f,wl_avgv9:p,wl_avgv10:Math.floor(window.preLoadTime||0),wl_avgv11:p-Math.floor(window.preLoadTime||0)>0?p-Math.floor(window.preLoadTime||0):p,c1:t,c2:0===n?"true":"false",bl_1:r,sampleRate:.05};n>=0&&window.__wpk.report(m)}catch(e){}},t=function(t){window.requestIdleCallback?window.requestIdleCallback((function(){e(t)})):setTimeout((function(){e(t)}),0)},n=function(e){e.filter((function(e){var t=e.initiatorType,n="css"===t&&e.name.endsWith(".css"),r="link"===t&&(e.name.endsWith(".js")||e.name.endsWith(".css"));return"script"===t||n||r})).forEach(t)};if(_=!0,!window.__wpk)return;var r=(v()||{}).wh_pid||location.pathname;if(console.log("[lzd-h5-itrace] init asset perf monitor"),window.performance&&window.PerformanceObserver){var i="resource",o=window.performance.getEntriesByType(i);n(o),new PerformanceObserver((function(e){n(e.getEntries())})).observe({entryTypes:[i]})}}}():console.log("[lzd-h5-itrace] close auto run iLoggerAssetPerf"),window.lib&&window.lib.mtop&&r.mtopPluginInit?Ne(e):console.log("[lzd-h5-itrace] close auto run mtopPluginInit"),r.didMountTimeReport?U():console.log("[lzd-h5-itrace] disable didMountTimeReport"),r.preloadProfile?Fe(e):console.log("[lzd-h5-itrace] close preload profile plugin"),r.webVitals?(We((function(e){F({group:"web_vitals",event:"web_vitals_lcp",lcp_value:Ve(e.value)}),window.__wpk.listeners=window.__wpk.listeners||[],window.__wpk.listeners.push({name:"LCP",callback:function(e){window.__wpk_LCP=e}}),Ye(e)})),Ue((function(e){F({group:"web_vitals",event:"web_vitals_fcp",fcp_value:Ve(e.value)}),Ye(e)})),Ge((function(e){F({group:"web_vitals",event:"web_vitals_fid",fid_value:e.value}),Ye(e)})),Ke((function(e){F({group:"web_vitals",event:"web_vitals_inp",inp_value:e.value}),Ye(e)})),Je((function(e){F({group:"web_vitals",event:"web_vitals_cls",cls_value:e.value}),Ye(e)}))):console.log("[lzd-h5-itrace] disable web vitals plugin"),window.itracePluginInitialized=!0}else console.warn("[lzd-h5-itrace] 非法域名")};window&&(function(e){if(!window.isTrace2){window.addEventListener("oniLoggerMtopPluginInit",(function(e){De(e.detail)}),!1);var t=!0;window.lib?window.lib.mtop&&(t=!1):window.lib={},t&&Object.defineProperty(window.lib,"mtop",{get:function(){return window.__lzdlib_mtop__},set:function(t){window.__lzdlib_mtop__=t,Object.defineProperty(window.lib.mtop,"middlewares",{get:function(){return window.__lzdlib_mtop_middlewares__},set:function(t){var n=new CustomEvent("oniLoggerMtopPluginInit",{detail:e||{}});window.__lzdlib_mtop_middlewares__=t,window.dispatchEvent(n)},configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}(Qe),$e&&(be({pid:$e}),Ze({pid:$e}))),e.iLoggerDataTrack=function(e){var t=e.scene,n=void 0===t?"unkown":t,r=e.status,i=void 0===r?1:r,o=e.value,a=void 0===o?0:o,c=e.args,s=void 0===c?"":c,l=d(e,Ie);if(/1|0/.test(i))if(/^\d+$/.test(a)){var f={w_succ:i,wl_avgv1:a,msg:n,bl1:s};Object.keys(l).forEach((function(e){/^filter([0-9]|10)$/.test(e)&&(f[e.replace("filter","c")]=l[e])})),window.__wpk&&window.__wpk.report&&window.__wpk.report(u({category:207},f))}else console.error("[lzd-h5-itrace] iLoggerDataTrack value should be correct integer");else console.error("[lzd-h5-itrace] iLoggerDataTrack status should be 0 or 1")},e.iLoggerInit=be,e.iLoggerIntegrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=be(e)}catch(e){console.log("[lzd-h5-itrace] catch iTrace sdk error, make program go on!")}return Ze(e),Qe=e,t},e.iLoggerMtopPluginInit=Ne,e.iLoggerReportApi=Re,e.iLoggerSelfDefineFSP=Pe,Object.defineProperty(e,"__esModule",{value:!0})}));
