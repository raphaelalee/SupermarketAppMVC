(function () {var _t=Object.defineProperty,bt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var Ie=(r,y,v)=>y in r?_t(r,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):r[y]=v,E=(r,y)=>{for(var v in y||(y={}))wt.call(y,v)&&Ie(r,v,y[v]);if(Ae)for(var v of Ae(y))Et.call(y,v)&&Ie(r,v,y[v]);return r},x=(r,y)=>bt(r,yt(y));(function(r,y){"use strict";function v(){const{hostname:o}=window.location;return!!(o&&(o.indexOf("pre-wormhole")===0||o.indexOf("pre-www")===0||o.indexOf("pdp-p")===0||o.indexOf("p-p")===0))}function q(){var t,n,i,s;const o=((t=window.g_config)==null?void 0:t.currentRegionID)||((n=window.g_config)==null?void 0:n.regionID)||"SG",e=((i=window.g_config)==null?void 0:i.currentLang)||((s=window.g_config)==null?void 0:s.language)||"en";return{regionID:o,language:e}}const le={ID:{fullDomain:".lazada.co.id",subDomain:"lazada",mainDomain:"co.id"},MY:{fullDomain:".lazada.com.my",subDomain:"lazada",mainDomain:"com.my"},PH:{fullDomain:".lazada.com.ph",subDomain:"lazada",mainDomain:"com.ph"},SG:{fullDomain:".lazada.sg",subDomain:"lazada",mainDomain:"sg"},TH:{fullDomain:".lazada.co.th",subDomain:"lazada",mainDomain:"co.th"},VN:{fullDomain:".lazada.vn",subDomain:"lazada",mainDomain:"vn"}};let ce=!1;function xe(){var o;if(typeof window=="object"&&!ce){const e=q().regionID,t=le[e]||le.SG;(o=window.lib)!=null&&o.mtop&&(window.lib.mtop.config=window.lib.mtop.config||{},window.lib.mtop.config.subDomain=t.subDomain,window.lib.mtop.config.mainDomain=t.mainDomain,window.lib.mtop.config.prefix=v()?"acs-wapa":"acs-m")}ce=!0}function Q(){var o;return xe(),(o=window.lib)!=null&&o.mtop?window.lib.mtop:{request(){return Promise.reject("Missing window Mtop lib")}}}const K={api:"mtop.lazada.vx",v:"1.0",data:{},needLogin:!1,ecode:0,type:"GET",dataType:"json",timeout:2e4};function Ne(){return Q().request(x(E({},K),{api:"mtop.lazada.redmart.channel.getRedMartUserInfo"}))}class Be extends r.Component{componentDidMount(){const t=document.getElementById("lzd-menu-redmart-box-logo-img");t==null||t.setAttribute("src","//lzd-img-global.slatic.net/g/tps/imgextra/i3/O1CN01AEBloH1kviZOrQZbW_!!6000000004746-55-tps-120-43.svg")}render(){return null}}class G extends Error{constructor(e){super(e),this.name="ApiResponseError",this.errorMessage=e,this.constructor=G,this.__proto__=G.prototype,this.message=e}}class H extends Error{constructor(e){super(e),this.name="RequireLoginError",this.requireLogin=!0,this.constructor=H,this.__proto__=H.prototype,this.message=e}}const Oe={default_error_message:"Oops! There was a server error. We're on it - please try again later."};function ue(o){const{data:e}=o;let t=o.ret||[];typeof t=="string"&&(t=[t]);const s=(t[0]||"").split("::")[0],c=s==="SUCCESS"&&e,u=Oe.default_error_message;if(c)return o;const m=["SESSION_EXPIRED","SID_INVALID","AUTH_REJECT","NEED_LOGIN"];let a=!1;throw s&&(a=m.some(l=>s.indexOf(l)>-1)),a?new H("Login required"):new G(u)}function Fe(o,e={},t={}){const n=JSON.stringify(e),i=JSON.stringify(t);return Q().request(x(E({},K),{api:"mtop.lazada.redmart.channel.GetCartProgressBarV2",data:{scene:o,extParams:n,cachedInfoMap:i}})).then(ue)}function L(o,e="true"){return location.search.indexOf(`${o}=${e}`)>-1}function de(){const o=location.hostname==="redmart.lazada.sg"&&(!location.pathname||location.pathname==="/"),e=location.search.indexOf("wh_pid=/lazada/channel/sg/redmart-channel/homepage")>-1;return o||e}function Pe(){const{search:o}=location;return o.indexOf("wh_pid=/lazada/channel/sg/redmart-channel/")>-1||o.indexOf("wh_pid=/lazada/channel/sg/redmart-campaign/")>-1}function De(o){const{progress:e}=o;if(!e)return null;const{stagedCount:t,pgStagedCount:n,cpgColor:i,pgPercent:s}=e,c=parseInt(String(t))||1,u=parseInt(String(n))||0,m=parseInt(String(s))||0,a=Array.from({length:c}).map((l,d)=>{const h=d<u;function g(){return h?"100%":d>u?0:m+"%"}const _={width:g()},b=r.createElement("div",{className:"rm-header-progressbar-multitier-progressbar-progress",style:_});return r.createElement("div",{key:d,className:"rm-header-progressbar-multitier-progressbar-segment"},b)});return r.createElement("div",{className:"rm-header-progressbar-multitier-progressbar-outer"},a)}function Me(o){const{isVisible:e}=o,t=e?"rm-header-progressbar-multitier-popover rm-header-progressbar-multitier-popover-visible":"rm-header-progressbar-multitier-popover";return r.createElement("div",{className:t},r.createElement("div",{className:"rm-header-progressbar-multitier-popover-arrow-container"},r.createElement("div",{className:"rm-header-progressbar-multitier-popover-arrow"})),r.createElement("div",{className:"rm-header-progressbar-multitier-popover-content"},r.createElement("div",{className:"rm-header-progressbar-multitier-popover-info-point"},r.createElement("span",{className:"text-bold"},"Free delivery")," on orders over $300"),r.createElement("div",{className:"rm-header-progressbar-multitier-popover-info"},r.createElement("p",null,"Orders over certain weights will be charged a heavy & bulky fee;"),r.createElement("table",{className:"rm-header-progressbar-multitier-popover-info-table"},r.createElement("tr",null,r.createElement("th",null),r.createElement("th",null,"> $300"),r.createElement("th",null,"> $500")),r.createElement("tr",null,r.createElement("td",null,"< 100kg"),r.createElement("td",null,"Free"),r.createElement("td",null,"Free")),r.createElement("tr",null,r.createElement("td",null,"> 100kg - 150kg"),r.createElement("td",null,"$1.50"),r.createElement("td",null,"Free")),r.createElement("tr",null,r.createElement("td",null,"> 150kg - 200kg"),r.createElement("td",null,"$3.00"),r.createElement("td",null,"Free")),r.createElement("tr",null,r.createElement("td",null,"> 200kg - 250kg"),r.createElement("td",null,"$6.00"),r.createElement("td",null,"Free")),r.createElement("tr",null,r.createElement("td",null,"> 250kg - 400kg"),r.createElement("td",null,"$12.00"),r.createElement("td",null,"Free"))))))}function je(o){const{rmB2B:e}=o;return e?r.createElement(Me,E({},o)):null}const Le="https://lzd-img-global.slatic.net/g/tps/tfs/TB1NBDTgO_1gK0jSZFqXXcpaXXa-112-112.png";class ze extends r.Component{constructor(e){super(e),this.showPopover=t=>{var i;(((i=this.props.progressBar)==null?void 0:i.rmB2B)||!1)&&this.setState({isPopoverVisible:!0})},this.hidePopover=()=>{this.setState({isPopoverVisible:!1})},this.state={isPopoverVisible:!1}}getDeliveryFeeMessage(){var n;const{delivery:e={}}=((n=this.props.progressBar)==null?void 0:n.cart)||{},{fee:t=[]}=e;return t.map(i=>{if(i.text){let s="normal";return(i==null?void 0:i.bold)==="true"&&(s="bold"),r.createElement("span",{key:i.text,className:"rm-header-progressbar-multitier-message-text",style:{fontWeight:s}},i.text)}else if(i.icon)return r.createElement("img",{key:i.icon,className:"rm-header-progressbar-multitier-message-image",src:i.icon});return null})}getInfoIcon(){var t;if(((t=this.props.progressBar)==null?void 0:t.rmB2B)||!1)return r.createElement("img",{className:"rm-header-progressbar-multitier-message-icon",src:Le})}render(){var s,c,u;const{progress:e}=((s=this.props.progressBar)==null?void 0:s.cart)||{},{isPopoverVisible:t}=this.state,n=((c=this.props.progressBar)==null?void 0:c.rmB2B)||!1,i=(u=this.props.progressBar)==null?void 0:u.popupType;return r.createElement("div",{className:"rm-header-progressbar-multitier",onMouseOver:this.showPopover,onMouseOut:this.hidePopover},r.createElement("div",{className:"rm-header-progressbar-multitier-message-container"},r.createElement("div",{className:"rm-header-progressbar-multitier-message"},r.createElement("div",{className:"rm-header-progressbar-multitier-message-content"},this.getDeliveryFeeMessage()),this.getInfoIcon()),r.createElement(De,{progress:e})),r.createElement(je,{isVisible:t,rmB2B:n,popupType:i}))}}class Ue extends r.Component{constructor(e){super(e),this.bindedListeners=!1,this.cachedInfoMap={},this.handleCartAddUpdateEvent=t=>{var s,c;const n=(s=t==null?void 0:t.detail)==null?void 0:s.scene,i=(c=t==null?void 0:t.detail)==null?void 0:c.extParams;this.fetchV2(n,i)},this.state={progressBar:null}}isFeatureEnabled(){const{customName:e}=this.props;return L("showRMProgressBar")||L("showRMFrame")||de()||Pe()?!0:!(q().regionID!=="SG"||e!=="redmart")}componentDidMount(){this.isFeatureEnabled()&&(this.fetchV2(),this.bindEventListeners(),this.mountNode=document.getElementById("lzd-menu-redmart-progressbar"))}componentWillUnmount(){this.unbindEventListeners()}bindEventListeners(){this.bindedListeners||(window.addEventListener("showredmartprogressbar",this.handleCartAddUpdateEvent),this.bindedListeners=!0)}unbindEventListeners(){this.bindedListeners&&(window.removeEventListener("showredmartprogressbar",this.handleCartAddUpdateEvent),this.bindedListeners=!1)}fetchV2(e,t){return Fe(e,t,this.cachedInfoMap).then(n=>{const i=n.data;this.cachedInfoMap=(i==null?void 0:i.cachedInfoMap)||{},this.setState({progressBar:i})}).catch(n=>{console.error(n)})}render(){const e=this.mountNode,{progressBar:t}=this.state;return!t||!e?null:y.createPortal(r.createElement(ze,{progressBar:t}),e)}}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACKUExURUxpcYGBgYGBgYWFhYCAgICAgICAgIKCgv///4GBgZWVlYyMjIGBgYCAgIKCgoGBgYGBgaqqqoODg7+/v4GBgZKSko6OjoGBgYWFhYGBgYSEhIGBgZmZmYCAgIGBgYGBgYCAgICAgIGBgYCAgICAgIiIiICAgIeHh4GBgYSEhIODg4GBgYGBgYCAgPLijmAAAAAtdFJOUwCS7jCDi/E1AbYMFJrrK9ToAycEugcJtBfYG64Fp+S+vb+god0e4SLcHyPgwPJLUkAAAAB6SURBVDjLY2AYYoCdkwu/AgVdHTG8Crj5dUVE8aqQkNQVl8GrQkpDV1oYrwpVbV1ZQbwq1OV0lTnwqhAS0OXBr4KPV5cRf3AwM+myEghRNl0WihQQsoKQIwl5U0tOVwmfvKYa/qCWUsEfWYSim2CCkddVFKMs0Q5aAABM4wlSQJ87yAAAAABJRU5ErkJggg==";function ke(o){const{breadcrumbs:e}=o,t=e.map((n,i)=>{const{title:s,link:c}=n,u=c?r.createElement("a",{href:n.link,className:"breadcrumb_item_anchor"},s):r.createElement("span",{className:"breadcrumb_item_span"},s),m=i<e.length-1?r.createElement("img",{className:"breadcrumb_right_arrow",src:Te}):null;return r.createElement("div",{key:s,className:"breadcrumb_item_container"},r.createElement("div",{className:"breadcrumb_item"},u,m))});return r.createElement("div",{className:"breadcrumb_container"},t)}const qe={SGConfig:{"breadcrumb:home:title":"RedMart","breadcrumb:home:link":"https://pages.lazada.sg/wow/gcp/route/lazada/sg/upr_1000345_lazada/channel/sg/upr-router/sg?hybrid=1&data_prefetch=true&prefetch_replace=1&at_iframe=1&wh_pid=/lazada/channel/sg/redmart-channel/homepage&useRMContainer=h5&showLoading=false&showTabBar=true&showSearchBar=true&useTabViewStack=true&showUserJourneyWidget=true&tab=home&showRMFrame=true&hideRMBreadcrumb=true","breadcrumb:sales:title":"Promos","breadcrumb:sales:link":"https://pages.lazada.sg/wow/gcp/route/lazada/sg/upr_1000345_lazada/channel/sg/upr-router/sg?hybrid=1&data_prefetch=true&prefetch_replace=1&at_iframe=1&wh_pid=/lazada/channel/sg/redmart-channel/promos&useRMContainer=h5&showLoading=false&showTabBar=true&showSearchBar=true&useTabViewStack=true&showUserJourneyWidget=true&tab=sales&showRMFrame=true","breadcrumb:lists:title":"Lists","breadcrumb:lists:link":"https://pages.lazada.sg/wow/gcp/route/lazada/sg/upr_1000345_lazada/channel/sg/upr-router/sg?hybrid=1&data_prefetch=true&prefetch_replace=1&at_iframe=1&wh_pid=/lazada/channel/sg/redmart-channel/mylist&disable_pull_refresh=true&enableNavBarAutohide=false&useRMContainer=h5&showLoading=false&showTabBar=true&useTabViewStack=true&showUserJourneyWidget=true&tab=more&showRMFrame=true&showSearchBar=false","breadcrumb:categories:title":"Categories","breadcrumb:categories:link":"https://pages.lazada.sg/wow/gcp/route/lazada/sg/upr_1000345_lazada/channel/sg/upr-router/sg?hybrid=1&data_prefetch=true&prefetch_replace=1&at_iframe=1&wh_pid=/lazada/channel/sg/redmart-channel/categories&useRMContainer=h5&showLoading=false&showTabBar=true&showSearchBar=true&useTabViewStack=true&showUserJourneyWidget=true&tab=categories&showRMFrame=true&disable_pull_refresh=true"},IDConfig:{},PHConfig:{}};function $(o){const{regionID:e}=q();return qe[`${e}Config`][o]||""}class Ge extends r.Component{constructor(e){var c;super(e);const{section:t,title:n}=this.getPageDetails();this.state={title:n,section:t};const i=document.getElementById("lzd-redmart-breadcrumb"),s=document.getElementById("content");if(this.isFeatureForcedEnabled()&&!i&&s){const u=document.createElement("div");u.setAttribute("id","lzd-redmart-breadcrumb"),(c=s.parentNode)==null||c.insertBefore(u,s),this.domNode=u}}getPageDetails(){const e=new URLSearchParams(window.location.search),t=e.get("section")||"",n=decodeURIComponent(e.get("listname")||""),i=t==="lists"?n:document.title;return{section:t,title:i}}isFeatureForcedEnabled(){return L("hideRMBreadcrumb")?!1:L("showRMBreadcrumb")?!0:de()?!1:!!L("showRMFrame")}componentDidMount(){const e=document.querySelector("title");typeof MutationObserver=="function"&&this.domNode&&e&&(this.observer=new MutationObserver(()=>{this.setState({title:document.title})}),this.observer.observe(e,{subtree:!0,characterData:!0,childList:!0}))}componentWillUnmount(){var e;(e=this.observer)==null||e.disconnect()}getBreadcrumbs(){const{title:e,section:t}=this.state;let n=[{title:"Home",link:"https://www.lazada.sg"},{title:$("breadcrumb:home:title"),link:$("breadcrumb:home:link")},{title:e}];if(t){const i=$(`breadcrumb:${t}:title`),s=$(`breadcrumb:${t}:link`);i&&s&&n.splice(-1,0,{title:i,link:s})}return n}render(){if(!this.domNode)return null;const e=r.createElement(ke,{breadcrumbs:this.getBreadcrumbs()});return y.createPortal(e,this.domNode)}}var V=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function me(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var O={},Z,he;function He(){return he||(he=1,Z=function(o){return encodeURIComponent(o).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}),Z}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var X,ge;function $e(){if(ge)return X;ge=1;var o=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var c={},u=0;u<10;u++)c["_"+String.fromCharCode(u)]=u;var m=Object.getOwnPropertyNames(c).map(function(l){return c[l]});if(m.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(l){a[l]=l}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch(l){return!1}}return X=i()?Object.assign:function(s,c){for(var u,m=n(s),a,l=1;l<arguments.length;l++){u=Object(arguments[l]);for(var d in u)e.call(u,d)&&(m[d]=u[d]);if(o){a=o(u);for(var h=0;h<a.length;h++)t.call(u,a[h])&&(m[a[h]]=u[a[h]])}}return m},X}var R,pe;function Ve(){if(pe)return R;pe=1;var o="%[a-f0-9]{2}",e=new RegExp("("+o+")|([^%]+?)","gi"),t=new RegExp("("+o+")+","gi");function n(c,u){try{return[decodeURIComponent(c.join(""))]}catch(l){}if(c.length===1)return c;u=u||1;var m=c.slice(0,u),a=c.slice(u);return Array.prototype.concat.call([],n(m),n(a))}function i(c){try{return decodeURIComponent(c)}catch(a){for(var u=c.match(e)||[],m=1;m<u.length;m++)c=n(u,m).join(""),u=c.match(e)||[];return c}}function s(c){for(var u={"%FE%FF":"��","%FF%FE":"��"},m=t.exec(c);m;){try{u[m[0]]=decodeURIComponent(m[0])}catch(g){var a=i(m[0]);a!==m[0]&&(u[m[0]]=a)}m=t.exec(c)}u["%C2"]="�";for(var l=Object.keys(u),d=0;d<l.length;d++){var h=l[d];c=c.replace(new RegExp(h,"g"),u[h])}return c}return R=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch(u){return s(c)}},R}var fe;function Ye(){if(fe)return O;fe=1;var o=He(),e=$e(),t=Ve();function n(a){switch(a.arrayFormat){case"index":return function(l,d,h){return d===null?[s(l,a),"[",h,"]"].join(""):[s(l,a),"[",s(h,a),"]=",s(d,a)].join("")};case"bracket":return function(l,d){return d===null?s(l,a):[s(l,a),"[]=",s(d,a)].join("")};default:return function(l,d){return d===null?s(l,a):[s(l,a),"=",s(d,a)].join("")}}}function i(a){var l;switch(a.arrayFormat){case"index":return function(d,h,g){if(l=/\[(\d*)\]$/.exec(d),d=d.replace(/\[\d*\]$/,""),!l){g[d]=h;return}g[d]===void 0&&(g[d]={}),g[d][l[1]]=h};case"bracket":return function(d,h,g){if(l=/(\[\])$/.exec(d),d=d.replace(/\[\]$/,""),l){if(g[d]===void 0){g[d]=[h];return}}else{g[d]=h;return}g[d]=[].concat(g[d],h)};default:return function(d,h,g){if(g[d]===void 0){g[d]=h;return}g[d]=[].concat(g[d],h)}}}function s(a,l){return l.encode?l.strict?o(a):encodeURIComponent(a):a}function c(a){return Array.isArray(a)?a.sort():typeof a=="object"?c(Object.keys(a)).sort(function(l,d){return Number(l)-Number(d)}).map(function(l){return a[l]}):a}function u(a){var l=a.indexOf("?");return l===-1?"":a.slice(l+1)}function m(a,l){l=e({arrayFormat:"none"},l);var d=i(l),h=Object.create(null);return typeof a!="string"||(a=a.trim().replace(/^[?#&]/,""),!a)?h:(a.split("&").forEach(function(g){var _=g.replace(/\+/g," ").split("="),b=_.shift(),A=_.length>0?_.join("="):void 0;A=A===void 0?null:t(A),d(t(b),A,h)}),Object.keys(h).sort().reduce(function(g,_){var b=h[_];return b&&typeof b=="object"&&!Array.isArray(b)?g[_]=c(b):g[_]=b,g},Object.create(null)))}return O.extract=u,O.parse=m,O.stringify=function(a,l){var d={encode:!0,strict:!0,arrayFormat:"none"};l=e(d,l),l.sort===!1&&(l.sort=function(){});var h=n(l);return a?Object.keys(a).sort(l.sort).map(function(g){var _=a[g];if(_===void 0)return"";if(_===null)return s(g,l);if(Array.isArray(_)){var b=[];return _.slice().forEach(function(A){A!==void 0&&b.push(h(g,A,b.length))}),b.join("&")}return s(g,l)+"="+s(_,l)}).filter(function(g){return g.length>0}).join("&"):""},O.parseUrl=function(a,l){return{url:a.split("?")[0]||"",query:m(u(a),l)}},O}var We=Ye();const _e=me(We),F={catalog:"/catalog/",hostMap:{sg:{pre:"pre-www.lazada.sg",online:"www.lazada.sg"},th:{pre:"pre-www.lazada.co.th",online:"www.lazada.co.th"},ph:{pre:"pre-www.lazada.com.ph",online:"www.lazada.com.ph"},id:{pre:"pre-www.lazada.co.id",online:"www.lazada.co.id"},vn:{pre:"pre-www.lazada.vn",online:"www.lazada.vn"},my:{pre:"pre-www.lazada.com.my",online:"www.lazada.com.my"}},suggestDebounceTime:300,defaultParams:{_keyori:"ss",m:"redmart"}};function Je(o="",e="sg",t="en-SG"){const n=String(e).toLowerCase();return Q().request(x(E({},K),{api:"mtop.relationrecommend.lazadarecommend.recommend",data:{appId:15778,params:JSON.stringify({q:o,region_id:n,platform:"pc",area:`redmart_${n}_web`,language:t,code:"utf-8"})}})).then(ue)}const Qe=()=>{const{spm_ab:o,pvid:e}=window.goldlog||{},[t,n]=o||[];return[t,n,"search","go",e].join(".")},be=(o,e)=>{const t=o.indexOf("?")==-1?"?":"&";return o+t+_e.stringify(e)},ee={"suggest-common":"_suggest-common_19y4o_1"};class Ke extends r.Component{handleClick(e,t){const{onClickByItem:n,displayText:i}=this.props;n&&n(i,e)}render(){const{title:e,query:t,className:n,catalogPrefix:i,catalogPath:s,searchServiceOptions:c,index:u,displayText:m}=this.props;if(!m)return null;let a=[ee["suggest-common"]];n&&a.push(ee[n]);const l=`${s}?q=${t}`,d=be(i+l,x(E(E({},F.defaultParams),c?{service:c}:{}),{from:"suggest_normal",sugg:`${t}_${u}_1`}));return r.createElement("a",{className:a.join(" "),href:d,onClick:this.handleClick.bind(this,l)},r.createElement("span",{className:ee["suggest-item-display-text"]},e))}}const Ze={"suggest-list":"_suggest-list_180pl_1"};class Xe extends r.Component{handleHighlightQueryInString(e=""){const{query:t=""}=this.props,n=e.toUpperCase().indexOf(t.toUpperCase());if(n!==-1){let i=e.substr(0,n),s=e.substr(n,t.length),c=e.substr(n+t.length);return s=s.charAt(0).toUpperCase()+s.slice(1),s.length<e.length?r.createElement("span",null,i,r.createElement("b",null,s),c):r.createElement("span",null,r.createElement("b",null,s))}return e}render(){const{items:e,catalogPrefix:t,catalogPath:n,onClickByItem:i,searchServiceOptions:s}=this.props;return!Array.isArray(e)||!e.length?null:r.createElement("div",{className:Ze["suggest-list"]},e.map((c,u)=>{const m=(c==null?void 0:c.model)||{};let a=m.displayText||m.query,l=x(E({},m),{className:"suggest-item",key:`suggest-item-${u}`,catalogPrefix:t,catalogPath:n,onClickByItem:i,displayText:a,index:u});switch(c==null?void 0:c.type){case"nt-auction_tag":case"nt-common":return r.createElement(Ke,x(E({},l),{title:this.handleHighlightQueryInString(a),searchServiceOptions:s}))}return null}))}}const Re={las_search_discovery:"Search Discovery",las_search_history:"Search History",las_search_label:"SEARCH",las_searchbar_hint:"Search in LazMart",las_search_clear:"CLEAR"},et={las_searchbar_hint:"Search in RedMart"};function tt(o){let e={locale:"en",messages:Re};return e.messages=E(E({},e.messages),et),e}function rt(o,e){return tt()}function Y(o){return rt().messages[o]}const P={history:"_history_1xre7_1",history__header:"_history__header_1xre7_5",history__title:"_history__title_1xre7_10",history__action:"_history__action_1xre7_16",history__list:"_history__list_1xre7_28",history__item:"_history__item_1xre7_33"};class nt extends r.Component{handleClick(e,t,n){const{onClickByItem:i}=this.props;i&&i(e,t)}render(){const{title:e,items:t=[],clearHistory:n,catalogPrefix:i,regionID:s,searchServiceOptions:c}=this.props;return!Array.isArray(t)||!t.length?null:r.createElement("div",{className:P.history},r.createElement("div",{className:P.history__header},r.createElement("div",{className:P.history__title},e),r.createElement("div",{className:`${P.history__action} ${s}`,onClick:n},Y("las_search_clear"))),r.createElement("div",{className:P.history__list},t.map((u,m)=>{let{title:a,url:l}=u||{};const d=be(i+l,x(E(E({},F.defaultParams),c?{service:c}:{}),{from:"search_history",sugg:`${a}_${m}_1`}));return r.createElement("a",{className:P.history__item,key:`history-item-${m}`,href:d,onClick:h=>this.handleClick(a,l,h)},a)})))}}const st=10,te="lzd_redmart_search_history";class at{constructor(e,t){this.storage=e,this.limit=t||st}isStorageSupported(){try{return this.storage.setItem("lzd_check","true"),this.storage.removeItem("lzd_check"),!0}catch(e){return console.warn("Local storage not supported"),!1}}get(){if(!this.isStorageSupported())return[];let e;try{e=JSON.parse(this.storage.getItem(te)||"")}catch(t){}return Array.isArray(e)?e:[]}set(e,t="title"){if(!this.isStorageSupported())return;let n=this.get();n=n.filter(s=>s[t]);let i=null;for(let s=0;s<n.length;s++)n[s][t]===e[t]&&(i=s);i!==null&&n.splice(i,1),n.unshift(e),this.storage.setItem(te,JSON.stringify(this.checkHistoryLength(n)))}checkHistoryLength(e){return e.length>this.limit?e.slice(0,this.limit):e}clear(){this.storage.setItem(te,JSON.stringify([]))}}var re,ye;function ot(){if(ye)return re;ye=1;var o="Expected a function",e=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,m=typeof V=="object"&&V&&V.Object===Object&&V,a=typeof self=="object"&&self&&self.Object===Object&&self,l=m||a||Function("return this")(),d=Object.prototype,h=d.toString,g=Math.max,_=Math.min,b=function(){return l.Date.now()};function A(p,w,I){var M,z,W,j,S,B,U=0,Ee=!1,T=!1,ae=!0;if(typeof p!="function")throw new TypeError(o);w=we(w)||0,se(I)&&(Ee=!!I.leading,T="maxWait"in I,W=T?g(we(I.maxWait)||0,w):W,ae="trailing"in I?!!I.trailing:ae);function oe(f){var N=M,k=z;return M=z=void 0,U=f,j=p.apply(k,N),j}function ht(f){return U=f,S=setTimeout(J,w),Ee?oe(f):j}function gt(f){var N=f-B,k=f-U,Ce=w-N;return T?_(Ce,W-k):Ce}function ve(f){var N=f-B,k=f-U;return B===void 0||N>=w||N<0||T&&k>=W}function J(){var f=b();if(ve(f))return Se(f);S=setTimeout(J,gt(f))}function Se(f){return S=void 0,ae&&M?oe(f):(M=z=void 0,j)}function pt(){S!==void 0&&clearTimeout(S),U=0,M=B=z=S=void 0}function ft(){return S===void 0?j:Se(b())}function ie(){var f=b(),N=ve(f);if(M=arguments,z=this,B=f,N){if(S===void 0)return ht(B);if(T)return S=setTimeout(J,w),oe(B)}return S===void 0&&(S=setTimeout(J,w)),j}return ie.cancel=pt,ie.flush=ft,ie}function se(p){var w=typeof p;return!!p&&(w=="object"||w=="function")}function dt(p){return!!p&&typeof p=="object"}function mt(p){return typeof p=="symbol"||dt(p)&&h.call(p)==t}function we(p){if(typeof p=="number")return p;if(mt(p))return e;if(se(p)){var w=typeof p.valueOf=="function"?p.valueOf():p;p=se(w)?w+"":w}if(typeof p!="string")return p===0?p:+p;p=p.replace(n,"");var I=s.test(p);return I||c.test(p)?u(p.slice(2),I?2:8):i.test(p)?e:+p}return re=A,re}var it=ot();const lt=me(it),C={"rm-search-box":"_rm-search-box_f2tau_1","rm-search-box__bar":"_rm-search-box__bar_f2tau_16","rm-search-box__input":"_rm-search-box__input_f2tau_24","rm-search-box__input-with-list":"_rm-search-box__input-with-list_f2tau_45","rm-search-box__search":"_rm-search-box__search_f2tau_73","rm-search-box__button":"_rm-search-box__button_f2tau_81","rm-search-box__popup":"_rm-search-box__popup_f2tau_97","rm-search-box__delimiter":"_rm-search-box__delimiter_f2tau_110"},D=class D extends r.Component{constructor(e){super(e),this.handleFetchSuggests=lt(t=>{if(t&&t.length>=D.VALUE_MIN_LENGTH){const{regionID:n,lang:i}=this.props;Je(t,n,i).then(s=>{var m;const u=(((m=s==null?void 0:s.data)==null?void 0:m.result)||[]).filter(a=>(a==null?void 0:a.type)==="nt-common");this.setState({suggests:u})})}},F.suggestDebounceTime),this.handleClickOutside=t=>{if(!this.state.isFocused)return;let n=t.target;for(;n!==this.form&&n&&n!==t.currentTarget;)n=n==null?void 0:n.parentNode;n!==this.form&&this.setState({isFocused:!1})},this.init(e)}init(e){let t="",n="",i="";try{const s=_e.parse(location.search);t=s.q||"",n=s.searchHint||"",i=s.isExpress==="true"?"express":""}catch(s){t=""}this.history=new at(window.localStorage,10),this.state={query:t,searchHint:n,searchServiceOptions:i,history:this.history.get(),isFocused:!1,suggests:[]}}getHost(){let{regionID:e="sg"}=this.props;e=e.toLowerCase();const t=v()?"pre":"online",{hostMap:n}=F;return(n[e]||n.sg)[t]}getFormActionPath(){return F.catalog}getFormActionURL(){return"//"+this.getHost()+this.getFormActionPath()}getSearchPlaceholder(){const{searchHint:e}=this.state;return e||Y("las_searchbar_hint")}normalizeSpaces(e){return e.replace(/\s\s+/," ")}trim(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}updateQuery(e){this.setState({query:e}),this.handleFetchSuggests(e)}handleChange(e){const{value:t}=e.target;this.updateQuery(t)}handleFocused(e){this.setState({isFocused:!0},()=>{const{query:t,suggests:n=[]}=this.state;n.length||this.handleFetchSuggests(t)})}handleSubmit(e){let{query:t=""}=this.state;if(t=this.trim(this.normalizeSpaces(t)),!t){e==null||e.preventDefault(),e==null||e.stopPropagation();return}const i=`${this.getFormActionPath()}?q=${t}`;this.updateSearchHistory(t,i)}updateSearchHistory(e,t){var n;e&&((n=this.history)==null||n.set({title:e,url:t}))}clearHistory(e){var t;(t=this.history)==null||t.clear(),this.setState({history:[]})}componentDidMount(){document.body.addEventListener("click",this.handleClickOutside)}componentWillUnmount(){document.body.removeEventListener("click",this.handleClickOutside)}render(){const{submitSpm:e,regionID:t}=this.props,{query:n,history:i,isFocused:s,suggests:c=[],searchServiceOptions:u}=this.state;let m=!1,a=!1;s&&c.length&&n.length>=D.VALUE_MIN_LENGTH&&(m=!0),s&&n.length<D.VALUE_MIN_LENGTH&&i.length>0&&(a=!0);const l=x(E(E({},F.defaultParams),u?{service:u}:{}),{from:"input",spm:Qe()}),d=a||m?`${C["rm-search-box__input"]} ${C["rm-search-box__input-with-list"]}`:C["rm-search-box__input"];return r.createElement("form",{onSubmit:this.handleSubmit.bind(this),action:this.getFormActionURL(),method:"GET",ref:h=>{this.form=h},autoComplete:"off"},r.createElement("div",{className:`${C["rm-search-box"]} ${t}`},r.createElement("div",{className:C["rm-search-box__bar"]},r.createElement("input",{type:"search",id:"q",name:"q",placeholder:this.getSearchPlaceholder(),className:d,tabIndex:1,value:n,onChange:this.handleChange.bind(this),onFocus:this.handleFocused.bind(this)}),Object.keys(l).map(h=>{const g=l[h];return r.createElement("input",{type:"hidden",key:h,name:h,value:g})})),r.createElement("div",{className:C["rm-search-box__search"]},r.createElement("button",{className:C["rm-search-box__button"],tabIndex:2,"data-spm-click":e},Y("las_search_label"))),a&&r.createElement("div",{className:C["rm-search-box__popup"]},r.createElement(nt,{regionID:t,items:i,title:Y("las_search_history"),clearHistory:this.clearHistory.bind(this),onClickByItem:this.updateSearchHistory.bind(this),catalogPrefix:"//"+this.getHost(),searchServiceOptions:u}),i.length?r.createElement("div",{className:C["rm-search-box__delimiter"]}):null),m&&r.createElement("div",{className:C["rm-search-box__popup"]},r.createElement(Xe,{items:c,query:n,catalogPrefix:"//"+this.getHost(),catalogPath:this.getFormActionPath(),onClickByItem:this.updateSearchHistory.bind(this),searchServiceOptions:u}))))}};D.VALUE_MIN_LENGTH=1;let ne=D;class ct extends r.Component{constructor(e){super(e),this.domNode=document.getElementById("lzd-menu-redmart-box-search")}render(){if(!this.domNode)return null;const{language:e,regionID:t}=q(),n=r.createElement(ne,{lang:e,regionID:t,submitSpm:"gostr=/lzdpub.header.search;locaid=d_go"});return y.createPortal(n,this.domNode)}}class ut extends r.Component{constructor(e){super(e),this.state={user:void 0}}componentDidMount(){this.fetchRedMartUser()}fetchRedMartUser(){Ne().then(e=>{var t;this.setState({user:((t=e==null?void 0:e.data)==null?void 0:t.module)||null})}).catch(e=>{console.error(e)})}render(){const{customName:e}=this.props,{user:t}=this.state,n=String(t==null?void 0:t.rmB2B)==="true";return r.createElement("div",{className:"rm-header-features"},n?r.createElement(Be,null):null,r.createElement(ct,null),r.createElement(Ue,{customName:e}),r.createElement(Ge,null))}}typeof window=="object"&&(window.LZD=window.LZD||{},window.LZD.RMHeader=ut)})(React,ReactDOM);
})();