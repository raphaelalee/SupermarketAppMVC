(self.webpackChunk_ali_psolution_lzd_head_foot=self.webpackChunk_ali_psolution_lzd_head_foot||[]).push([[158,781,600,442],{8864:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var o=n(1576),i=n(7791),r=n(141),a=n(5888),u=n(925),c=n(4743),s=n(2879),l="get-the-app-error",d="get-the-app-loading",f=function(){function e(t){(0,o._)(this,e),(0,r._)(this,"$el",void 0),(0,r._)(this,"cfg",void 0),(0,r._)(this,"$form",void 0),(0,r._)(this,"$input",void 0),(0,r._)(this,"$successMsg",void 0),(0,r._)(this,"$errorMsg",void 0),this.$el=t,this.cfg={url:"SG"===a.regionID||"TH"===a.regionID||"MY"===a.regionID?"//www.".concat(a.domain,"/index/smsproxy/"):"//www.".concat(a.domain,"/index/smsproxy"),ajaxForm:!0,defaultParams:{key:"smshp"},numberPrefix:{VN:"+84",TH:"+66",SG:"+65",PH:"+63",ID:"+62",MY:"+60"}},this.$form=document.querySelector("#topActionDownloadForm"),this.$input=document.querySelector("#topActionDownloadInput"),this.$successMsg=document.querySelector("#topActionDownloadSuccessMsg"),this.$errorMsg=document.querySelector("#topActionDownloadErrorMsg"),this.initialize()}return(0,i._)(e,[{key:"initialize",value:function(){var e;null===(e=this.$form)||void 0===e||e.addEventListener("submit",this.onFormSubmit.bind(this))}},{key:"onFormSubmit",value:function(e){var t,n,o,i=this;(0,c.clickEvent)("/lzdhome.desktop.footer_download_btn",{venture:(null===(n=window)||void 0===n||null===(t=n.g_config)||void 0===t?void 0:t.regionID)||""});var r=null===(o=this.$input)||void 0===o?void 0:o.value.trim();e.preventDefault(),this.clearError(),this.isValid(r)?(this.showLoading(),(0,s.default)({url:"".concat(this.cfg.url,"?key=smshp&mobile=").concat(encodeURIComponent(this.getPhoneNumberWithPrefix(r))),method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","Access-Control-Allow-Origin":"*"}}).then((function(e){i.hideLoading(),0===parseFloat(e.status)?i.showSuccess():i.showError(e["error-text"]||"Fail, please try later!")}),(function(){i.hideLoading()}))):this.showError("Please enter a valid phone number!")}},{key:"isValid",value:function(e){return e&&""!==e&&/^\d{8,20}$/g.test(e.replace("+",""))}},{key:"getPhoneNumberWithPrefix",value:function(e){var t=a.regionID,n=this.cfg.numberPrefix[t]||this.cfg.numberPrefix.VN;return 0===e.indexOf("+")?e:n+e.replace(/^0+/,"")}},{key:"clearError",value:function(){var e;this.$errorMsg&&(this.$errorMsg.innerHTML=""),null===(e=this.$el)||void 0===e||e.classList.remove(l)}},{key:"showSuccess",value:function(){var e;null===(e=this.$el)||void 0===e||e.classList.add("get-the-app-success")}},{key:"showError",value:function(e){var t;e&&this.$errorMsg&&(this.$errorMsg.innerHTML=u.default[e]),null===(t=this.$el)||void 0===t||t.classList.add(l)}},{key:"showLoading",value:function(){var e;null===(e=this.$el)||void 0===e||e.classList.add(d)}},{key:"hideLoading",value:function(){var e;null===(e=this.$el)||void 0===e||e.classList.remove(d)}}]),e}()},6613:function(e,t,n){n.r(t);var o={updateNumber(e){var t=e&&e.size||0,n=document.getElementById("topActionCartNumber");n&&(t>0?(n.innerHTML=t,n.style.display="block"):(n.innerHTML="",n.style.display="none"))}};window.LZD=window.LZD||{},window.LZD.Cart=o,t.default=o},827:function(e,t,n){n.r(t),n.d(t,{isInternal:function(){return o}});var o=function(e,t){var n=new Image;n.src="INTERNAL_IMG?d=".concat((new Date).getTime()),n.onload=function(){e()},n.onerror=t}},7158:function(e,t,n){n.r(t);var o=n(1576),i=n(7791),r=n(4781),a=n(1719),u=n(5888),c=n(2879),s=n(9152),l=n(6613),d=n(827),f=n(8864),h=n(9772),p=n(5652),m=n(9953),v=u.domain,g=function(){function e(){(0,o._)(this,e),this.poperBind(),this.initialize()}return(0,i._)(e,[{key:"fetchUserInfo",value:function(){var e=this,t=(0,u.isDaily)()?"//buyer.lazada.test/user/api/getUser":"//member.".concat(v,"/user/api/getUser");this.requestRestful(t).then((function(t){var n={isLogin:!1};t.module&&(t.module.name||t.module.email||t.module.phone)&&(n=(0,r._)({isLogin:!0},t.module),(0,m.default)({isLogin:n.isLogin,first_name:n.name||n.email||n.phone}),e.accountDropdown());var o=new CustomEvent("userInfoUpdate",{detail:(0,a._)((0,r._)({},n),{isLogin:n.isLogin,is_loyalty_member:n.isLiveUp,enableEwallet:n.enableEwallet})});document.body.dispatchEvent(o),new h.default(document.querySelector(".lzd-track-content"),{customerInfo:n})}),(function(){new h.default(document.querySelector(".lzd-track-content"),{})}))}},{key:"fetchCartInfo",value:function(){window.lib_anonymousCart&&window.lib_anonymousCart.onCountChange&&window.lib_anonymousCart.onCountChange((function(e){l.default.updateNumber({size:e})}))}},{key:"fetchDarazCartInfo",value:function(){var e=(0,u.isDaily)()?"//buyer.lazada.test/cart/api/count":"//cart.".concat(v,"/cart/api/count");this.requestRestful(e).then((function(e){e.module&&e.module.cartNum&&l.default.updateNumber({size:e.module.cartNum})}))}},{key:"initialize",value:function(){var e=document.getElementById("topActionInternalFeedback"),t=document.getElementById("topActionFeedback");(0,d.isInternal)((function(){e&&(e.style.display="inline-block"),t&&(t.style.display="none")}),(function(){})),new f.default(document.querySelector(".get-the-app")),new p.default,v&&(this.fetchUserInfo(),window.g_config&&"object"===typeof window.g_config&&window.g_config.wh_project&&"lazada"===window.g_config.wh_project?this.fetchCartInfo():this.fetchDarazCartInfo())}},{key:"requestJSONP",value:function(){return(0,c.default)({url:"//layout.".concat(v,"/v2/layout/variables/"),type:"jsonp",timeout:3e4,jsonpCallback:"callback",withCredentials:!0})}},{key:"requestRestful",value:function(e){if(e)return(0,c.default)({url:e,method:"GET",timeout:3e4,type:"json",withCredentials:!0})}},{key:"popperInit",value:function(e,t){return new s.default(e,t,{className:"top-popup-wrap-active"})}},{key:"accountDropdown",value:function(){var e=this.popperInit(".lzd-account-popup","#topActionUserAccont");this.mouseOutHide(e,[document.querySelector(".lzd-account-popup"),document.getElementById("topActionUserAccont")])}},{key:"poperBind",value:function(){var e=this.popperInit(".lzd-download-popup","#topActionDownload");this.bodyClickHide(e);var t=this.popperInit(".lzd-customcare-popup","#topActionCustomCare");this.mouseOutHide(t,[document.querySelector(".lzd-customcare-popup"),document.getElementById("topActionCustomCare")]);var n=this.popperInit(".lzd-track-popup","#topActionTrack");this.bodyClickHide(n);var o=this.popperInit(".lzd-switch-popup","#topActionSwitchLang");this.mouseOutHide(o,[document.querySelector(".lzd-switch-popup"),document.getElementById("topActionSwitchLang")])}},{key:"bodyClickHide",value:function(e){document.body.addEventListener("click",(function(t){var n=document.querySelector(e.triggerRef);n&&!n.contains(t.target)&&e.hide()}))}},{key:"mouseOutHide",value:function(e,t){t.forEach((function(t){var n;null===(n=t)||void 0===n||n.addEventListener("mouseleave",(function(){e.hide()}))}))}}]),e}();t.default=g},5652:function(e,t,n){n.r(t);var o=n(122);t.default=function(){o.default.removeRoot&&o.default.removeRoot(),o.default.get()&&"null"!==o.default.get()||o.default.setDefault(),document.querySelectorAll(".lzd-switch-item").forEach((function(e){e.addEventListener("click",(function(e){var t;(t=e.currentTarget.getAttribute("data-lang"))&&o.default.setLang(t),location.reload()}))}))}},9953:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o=n(925);function i(e){var t,n;if(e.isLogin){var i=o.default["siteNav.account"].replace("{user}",e.first_name);null===(t=document.querySelector("#anonLogin"))||void 0===t||t.remove(),null===(n=document.querySelector("#anonSignup"))||void 0===n||n.remove();var r=document.querySelector("#topActionUserAccont");if(r){r.classList.remove("top-links-item-hidden");var a=r.querySelector("#myAccountTrigger");a&&(a.textContent=i)}}}},122:function(e,t,n){n.r(t);var o=n(8620),i=n(5888),r="userLanguageML",a="localhost";function u(e){if(e){e=function(e,t){var n;try{n=i.SITE_CONFIGS[t].lang}catch(o){}return n?Array.isArray(n)?(n.forEach((function(t){(t===e||t.indexOf(e)>-1)&&(e=t)})),e):n:null}(e,i.regionID);var t=i.SITE_CONFIGS[i.regionID],n=location.hostname.indexOf(a)>=0;if(e||t){var u={domain:".".concat(n?a:t.domain),expires:30};(0,o.d8)("hng","".concat(i.regionID,"|").concat(e,"|").concat(t.currency,"|").concat(t.id),u),n||((0,o.nJ)(r,{path:"/",domain:".".concat(t.domain)}),e=e.substring(0,2),(0,o.d8)(r,e,{expires:30}))}}}var c={setDefault:function(){var e;try{e=i.SITE_CONFIGS[i.regionID].lang}catch(t){}if(e)return Array.isArray(e)?e.indexOf(i.language)>-1?u(i.language):u(e[0]):u(e)},setLang:u,get:function(){return(0,o.ej)("hng")},removeRoot:function(){var e=i.SITE_CONFIGS[i.regionID],t=e?{path:"/",domain:".".concat(e.domain)}:{path:"/"};(0,o.nJ)(r,t)}};t.default=c},9152:function(e,t,n){n.r(t);var o=n(1576),i=n(7791),r=n(141),a=function(){function e(t,n,i){var a=this;(0,o._)(this,e),(0,r._)(this,"handleAttachEvent",(function(e){if(a.isShow){var t=document.querySelector(a.elementRef);t&&!t.contains(e.target)&&a.hide()}else a.calcPosition(),a.show();a.options.stopPropagation&&e.stopPropagation()})),this.elementRef=t,this.triggerRef=n,this.options=i,this.isShow=!1,this.attach()}return(0,i._)(e,[{key:"attach",value:function(){var e;this.triggerRef&&(null===(e=document.querySelector(this.triggerRef))||void 0===e||e.addEventListener("click",this.handleAttachEvent))}},{key:"detach",value:function(){this.triggerRef&&document.querySelector(this.triggerRef).removeEventListener("click",this.handleAttachEvent)}},{key:"calcPosition",value:function(){var e=this.options.offset,t=void 0===e?{}:e,n=document.querySelector(this.triggerRef),o=document.querySelector(this.elementRef);if(o){var i=n.offsetHeight;o.style.top="".concat(i+parseInt(t&&t.x?t.x:0,10),"px")}}},{key:"show",value:function(e){this.isShow||(document.querySelector(this.elementRef).classList.add(this.options.className),this.isShow=!0,e&&e())}},{key:"hide",value:function(e){this.isShow&&(document.querySelector(this.elementRef).classList.remove(this.options.className),this.isShow=!1,e&&e())}}]),e}();t.default=a}}]);